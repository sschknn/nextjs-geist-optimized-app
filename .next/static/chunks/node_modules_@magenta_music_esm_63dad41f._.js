(globalThis.TURBOPACK = globalThis.TURBOPACK || []).push([typeof document === "object" ? document.currentScript : undefined, {

"[project]/node_modules/@magenta/music/esm/core.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/index.js [app-client] (ecmascript) <module evaluation>"); //# sourceMappingURL=core.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/core.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/coconet/coconet_utils.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "IS_IOS": (()=>IS_IOS),
    "MIN_PITCH": (()=>MIN_PITCH),
    "NUM_PITCHES": (()=>NUM_PITCHES),
    "NUM_VOICES": (()=>NUM_VOICES),
    "pianorollToSequence": (()=>pianorollToSequence),
    "sequenceToPianoroll": (()=>sequenceToPianoroll)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/globals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/zeros.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/tensor.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/logging.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/protobuf/index.js [app-client] (ecmascript)");
;
;
;
const IS_IOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
const NUM_PITCHES = 46;
const MIN_PITCH = 36;
const NUM_VOICES = 4;
function pianorollToSequence(pianoroll, numberOfSteps) {
    const reshaped = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>pianoroll.reshape([
            numberOfSteps,
            NUM_PITCHES,
            NUM_VOICES
        ]).arraySync());
    const sequence = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NoteSequence"].create();
    const notes = [];
    for(let s = 0; s < numberOfSteps; s++){
        for(let p = 0; p < NUM_PITCHES; p++){
            for(let v = 0; v < NUM_VOICES; v++){
                const value = reshaped[s][p][v];
                if (value === 1.0) {
                    const note = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NoteSequence"].Note.create({
                        pitch: p + MIN_PITCH,
                        instrument: v,
                        quantizedStartStep: s,
                        quantizedEndStep: s + 1
                    });
                    notes.push(note);
                }
            }
        }
    }
    sequence.notes = notes;
    sequence.totalQuantizedSteps = notes[notes.length - 1].quantizedEndStep;
    sequence.quantizationInfo = {
        stepsPerQuarter: 4
    };
    return sequence;
}
function sequenceToPianoroll(ns, numberOfSteps) {
    const pianoroll = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
            numberOfSteps,
            NUM_PITCHES,
            NUM_VOICES
        ]).arraySync());
    const notes = ns.notes;
    notes.forEach((note)=>{
        const pitchIndex = note.pitch - MIN_PITCH;
        const stepIndex = note.quantizedStartStep;
        const duration = note.quantizedEndStep - note.quantizedStartStep;
        const voice = note.instrument;
        if (voice < 0 || voice >= NUM_VOICES) {
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["log"])(`Found invalid voice ${voice}. Skipping.`, 'Coconet', 5);
        } else {
            if (stepIndex + duration > numberOfSteps) {
                throw new Error(`NoteSequence ${ns.id} has notes that are longer than the sequence's
          totalQuantizedSteps.`);
            }
            for(let i = stepIndex; i < stepIndex + duration; i++){
                pianoroll[i][pitchIndex][voice] = 1;
            }
        }
    });
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor"])([
        pianoroll
    ]);
} //# sourceMappingURL=coconet_utils.js.map
}}),
"[project]/node_modules/@magenta/music/esm/coconet/model.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "Coconet": (()=>Coconet)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/globals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$conv2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/conv2d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$depthwise_conv2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/depthwise_conv2d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/split.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mat_mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/mat_mul.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/add.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/concat.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$separable_conv2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/separable_conv2d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$batchnorm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/batchnorm.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$squeeze$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/squeeze.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/tensor.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$max_pool$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/max_pool.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/scalar.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$io$2f$io$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__io$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/io/io.js [app-client] (ecmascript) <export * as io>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$buffer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/buffer.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/cast.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros_like$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/zeros_like.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$browser_util$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/browser_util.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$where$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/where.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tile$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/tile.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_uniform$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/random_uniform.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$pow$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/pow.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cumsum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/cumsum.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/one_hot.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/compat/global.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/compat/global.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/logging.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$sequences$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/sequences.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$coconet_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet/coconet_utils.js [app-client] (ecmascript)");
;
;
;
;
;
const DEFAULT_SPEC = {
    useSoftmaxLoss: true,
    batchNormVarianceEpsilon: 1.0e-07,
    numInstruments: 4,
    numFilters: 128,
    numLayers: 33,
    numRegularConvLayers: 0,
    dilation: [
        [
            1,
            1
        ],
        [
            2,
            2
        ],
        [
            4,
            4
        ],
        [
            8,
            8
        ],
        [
            16,
            16
        ],
        [
            16,
            32
        ],
        [
            1,
            1
        ],
        [
            2,
            2
        ],
        [
            4,
            4
        ],
        [
            8,
            8
        ],
        [
            16,
            16
        ],
        [
            16,
            32
        ],
        [
            1,
            1
        ],
        [
            2,
            2
        ],
        [
            4,
            4
        ],
        [
            8,
            8
        ],
        [
            16,
            16
        ],
        [
            16,
            32
        ],
        [
            1,
            1
        ],
        [
            2,
            2
        ],
        [
            4,
            4
        ],
        [
            8,
            8
        ],
        [
            16,
            16
        ],
        [
            16,
            32
        ],
        [
            1,
            1
        ],
        [
            2,
            2
        ],
        [
            4,
            4
        ],
        [
            8,
            8
        ],
        [
            16,
            16
        ],
        [
            16,
            32
        ]
    ],
    layers: null,
    interleaveSplitEveryNLayers: 16,
    numPointwiseSplits: 4
};
class ConvNet {
    constructor(spec, vars){
        this.residualPeriod = 2;
        this.outputForResidual = null;
        this.residualCounter = -1;
        this.rawVars = null;
        this.spec = spec;
        this.rawVars = vars;
    }
    dispose() {
        if (this.rawVars !== null) {
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["dispose"])(this.rawVars);
        }
        if (this.outputForResidual) {
            this.outputForResidual.dispose();
        }
    }
    predictFromPianoroll(pianoroll, masks) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            let featuremaps = this.getConvnetInput(pianoroll, masks);
            const n = this.spec.layers.length;
            for(let i = 0; i < n; i++){
                this.residualCounter += 1;
                this.residualSave(featuremaps);
                let numPointwiseSplits = null;
                if (this.spec.interleaveSplitEveryNLayers && i > 0 && i < n - 2 && i % (this.spec.interleaveSplitEveryNLayers + 1) === 0) {
                    numPointwiseSplits = this.spec.numPointwiseSplits;
                }
                featuremaps = this.applyConvolution(featuremaps, this.spec.layers[i], i, i >= this.spec.numRegularConvLayers, numPointwiseSplits);
                featuremaps = this.applyResidual(featuremaps, i === 0, i === n - 1, i);
                featuremaps = this.applyActivation(featuremaps, this.spec.layers[i], i);
                featuremaps = this.applyPooling(featuremaps, this.spec.layers[i], i);
            }
            return this.computePredictions(featuremaps);
        });
    }
    computePredictions(logits) {
        if (this.spec.useSoftmaxLoss) {
            return logits.transpose([
                0,
                1,
                3,
                2
            ]).softmax().transpose([
                0,
                1,
                3,
                2
            ]);
        }
        return logits.sigmoid();
    }
    residualReset() {
        this.outputForResidual = null;
        this.residualCounter = 0;
    }
    residualSave(x) {
        if (this.residualCounter % this.residualPeriod === 1) {
            this.outputForResidual = x;
        }
    }
    applyResidual(x, isFirst, isLast, i) {
        if (this.outputForResidual == null) {
            return x;
        }
        if (this.outputForResidual.shape[this.outputForResidual.shape.length - 1] !== x.shape[x.shape.length - 1]) {
            this.residualReset();
            return x;
        }
        if (this.residualCounter % this.residualPeriod === 0) {
            if (!isFirst && !isLast) {
                x = x.add(this.outputForResidual);
            }
        }
        return x;
    }
    getVar(name, layerNum) {
        const varname = `model/conv${layerNum}/${name}`;
        return this.rawVars[varname];
    }
    getSepConvVar(name, layerNum) {
        const varname = `model/conv${layerNum}/SeparableConv2d/${name}`;
        return this.rawVars[varname];
    }
    getPointwiseSplitVar(name, layerNum, splitNum) {
        const varname = `model/conv${layerNum}/split_${layerNum}_${splitNum}/${name}`;
        return this.rawVars[varname];
    }
    applyConvolution(x, layer, i, depthwise, numPointwiseSplits) {
        if (layer.filters == null) {
            return x;
        }
        const filterShape = layer.filters;
        const stride = layer.convStride || 1;
        const padding = layer.convPad ? layer.convPad.toLowerCase() : 'same';
        let conv = null;
        if (depthwise) {
            const dWeights = this.getSepConvVar('depthwise_weights', i);
            if (!numPointwiseSplits) {
                const pWeights = this.getSepConvVar('pointwise_weights', i);
                const biases = this.getSepConvVar('biases', i);
                const sepConv = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$separable_conv2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["separableConv2d"])(x, dWeights, pWeights, [
                    stride,
                    stride
                ], padding, layer.dilation, 'NHWC');
                conv = sepConv.add(biases);
            } else {
                conv = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$depthwise_conv2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["depthwiseConv2d"])(x, dWeights, [
                    stride,
                    stride
                ], padding, 'NHWC', layer.dilation);
                const splits = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(conv, numPointwiseSplits, conv.rank - 1);
                const pointwiseSplits = [];
                for(let splitIdx = 0; splitIdx < numPointwiseSplits; splitIdx++){
                    const outputShape = filterShape[3] / numPointwiseSplits;
                    const weights = this.getPointwiseSplitVar('kernel', i, splitIdx);
                    const biases = this.getPointwiseSplitVar('bias', i, splitIdx);
                    const dot = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mat_mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["matMul"])(splits[splitIdx].reshape([
                        -1,
                        outputShape
                    ]), weights, false, false);
                    const bias = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])(dot, biases);
                    pointwiseSplits.push(bias.reshape([
                        splits[splitIdx].shape[0],
                        splits[splitIdx].shape[1],
                        splits[splitIdx].shape[2],
                        outputShape
                    ]));
                }
                conv = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])(pointwiseSplits, conv.rank - 1);
            }
        } else {
            const weights = this.getVar('weights', i);
            const stride = layer.convStride || 1;
            const padding = layer.convPad ? layer.convPad.toLowerCase() : 'same';
            conv = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$conv2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["conv2d"])(x, weights, [
                stride,
                stride
            ], padding, 'NHWC', [
                1,
                1
            ]);
        }
        return this.applyBatchnorm(conv, i);
    }
    applyBatchnorm(x, i) {
        const gammas = this.getVar('gamma', i);
        const betas = this.getVar('beta', i);
        const mean = this.getVar('popmean', i);
        const variance = this.getVar('popvariance', i);
        if (__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$coconet_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["IS_IOS"]) {
            const v = variance.arraySync()[0][0][0];
            const stdevs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor"])(v.map((x)=>Math.sqrt(x + this.spec.batchNormVarianceEpsilon)));
            return x.sub(mean).mul(gammas.div(stdevs)).add(betas);
        }
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$batchnorm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["batchNorm"])(x, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$squeeze$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["squeeze"])(mean), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$squeeze$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["squeeze"])(variance), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$squeeze$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["squeeze"])(betas), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$squeeze$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["squeeze"])(gammas), this.spec.batchNormVarianceEpsilon);
    }
    applyActivation(x, layer, i) {
        if (layer.activation === 'identity') {
            return x;
        }
        return x.relu();
    }
    applyPooling(x, layer, i) {
        if (layer.pooling == null) {
            return x;
        }
        const pooling = layer.pooling;
        const padding = layer.poolPad ? layer.poolPad.toLowerCase() : 'same';
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$max_pool$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["maxPool"])(x, [
            pooling[0],
            pooling[1]
        ], [
            pooling[0],
            pooling[1]
        ], padding);
    }
    getConvnetInput(pianoroll, masks) {
        pianoroll = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1, 'float32').sub(masks).mul(pianoroll);
        masks = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1, 'float32').sub(masks);
        return pianoroll.concat(masks, 3);
    }
}
class Coconet {
    constructor(checkpointURL){
        this.spec = null;
        this.initialized = false;
        this.checkpointURL = checkpointURL;
        this.spec = DEFAULT_SPEC;
    }
    async initialize() {
        this.dispose();
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["performance"].now();
        this.instantiateFromSpec();
        const vars = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fetch"])(`${this.checkpointURL}/weights_manifest.json`).then((response)=>response.json()).then((manifest)=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$io$2f$io$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__io$3e$__["io"].loadWeights(manifest, this.checkpointURL));
        this.convnet = new ConvNet(this.spec, vars);
        this.initialized = true;
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Initialized model', startTime, 'Coconet');
    }
    dispose() {
        if (this.convnet) {
            this.convnet.dispose();
        }
        this.initialized = false;
    }
    isInitialized() {
        return this.initialized;
    }
    instantiateFromSpec() {
        const nonFinalLayerFilterOuterSizes = 3;
        const finalTwoLayersFilterOuterSizes = 2;
        this.spec.layers = [];
        this.spec.layers.push({
            filters: [
                nonFinalLayerFilterOuterSizes,
                nonFinalLayerFilterOuterSizes,
                this.spec.numInstruments * 2,
                this.spec.numFilters
            ]
        });
        for(let i = 0; i < this.spec.numLayers - 3; i++){
            this.spec.layers.push({
                filters: [
                    nonFinalLayerFilterOuterSizes,
                    nonFinalLayerFilterOuterSizes,
                    this.spec.numFilters,
                    this.spec.numFilters
                ],
                dilation: this.spec.dilation ? this.spec.dilation[i] : null
            });
        }
        this.spec.layers.push({
            filters: [
                finalTwoLayersFilterOuterSizes,
                finalTwoLayersFilterOuterSizes,
                this.spec.numFilters,
                this.spec.numFilters
            ]
        });
        this.spec.layers.push({
            filters: [
                finalTwoLayersFilterOuterSizes,
                finalTwoLayersFilterOuterSizes,
                this.spec.numFilters,
                this.spec.numInstruments
            ],
            activation: 'identity'
        });
    }
    async infill(sequence, config) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$sequences$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["assertIsRelativeQuantizedSequence"])(sequence);
        if (sequence.notes.length === 0) {
            throw new Error(`NoteSequence ${sequence.id} does not have any notes to infill.`);
        }
        const numSteps = sequence.totalQuantizedSteps || sequence.notes[sequence.notes.length - 1].quantizedEndStep;
        const pianoroll = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$coconet_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sequenceToPianoroll"])(sequence, numSteps);
        let temperature = 0.99;
        let numIterations = 96;
        let outerMasks;
        if (config) {
            numIterations = config.numIterations || numIterations;
            temperature = config.temperature || temperature;
            outerMasks = this.getCompletionMaskFromInput(config.infillMask, pianoroll);
        } else {
            outerMasks = this.getCompletionMask(pianoroll);
        }
        const samples = await this.run(pianoroll, numIterations, temperature, outerMasks);
        const outputSequence = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$coconet_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pianorollToSequence"])(samples, numSteps);
        pianoroll.dispose();
        samples.dispose();
        outerMasks.dispose();
        return outputSequence;
    }
    async run(pianorolls, numSteps, temperature, outerMasks) {
        return this.gibbs(pianorolls, numSteps, temperature, outerMasks);
    }
    getCompletionMaskFromInput(masks, pianorolls) {
        if (!masks) {
            return this.getCompletionMask(pianorolls);
        } else {
            const buffer = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$buffer$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["buffer"])([
                pianorolls.shape[1],
                4
            ]);
            for(let i = 0; i < masks.length; i++){
                buffer.set(1, masks[i].step, masks[i].voice);
            }
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
                return buffer.toTensor().expandDims(1).tile([
                    1,
                    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$coconet_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NUM_PITCHES"],
                    1
                ]).expandDims(0);
            });
        }
    }
    getCompletionMask(pianorolls) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const isEmpty = pianorolls.sum(2, true).equal((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(0, 'float32'));
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cast"])(isEmpty, 'float32').add((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros_like$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zerosLike"])(pianorolls));
        });
    }
    async gibbs(pianorolls, numSteps, temperature, outerMasks) {
        const numStepsTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(numSteps, 'float32');
        let pianoroll = pianorolls.clone();
        for(let s = 0; s < numSteps; s++){
            const pm = this.yaoSchedule(s, numStepsTensor);
            const innerMasks = this.bernoulliMask(pianoroll.shape, pm, outerMasks);
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$browser_util$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["nextFrame"])();
            const predictions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
                return this.convnet.predictFromPianoroll(pianoroll, innerMasks);
            });
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$browser_util$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["nextFrame"])();
            pianoroll = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
                const samples = this.samplePredictions(predictions, temperature);
                const updatedPianorolls = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$where$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["where"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cast"])(innerMasks, 'bool'), samples, pianoroll);
                pianoroll.dispose();
                predictions.dispose();
                innerMasks.dispose();
                pm.dispose();
                return updatedPianorolls;
            });
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$browser_util$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["nextFrame"])();
        }
        numStepsTensor.dispose();
        return pianoroll;
    }
    yaoSchedule(i, n) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const pmin = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(0.1, 'float32');
            const pmax = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(0.9, 'float32');
            const alpha = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(0.7, 'float32');
            const wat = pmax.sub(pmin).mul((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(i, 'float32')).div(n);
            const secondArg = pmax.sub(wat).div(alpha);
            return pmin.reshape([
                1
            ]).concat(secondArg.reshape([
                1
            ])).max();
        });
    }
    bernoulliMask(shape, pm, outerMasks) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const [bb, tt, pp, ii] = shape;
            const probs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tile$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tile"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_uniform$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["randomUniform"])([
                bb,
                tt,
                1,
                ii
            ], 0, 1, 'float32'), [
                1,
                1,
                pp,
                1
            ]);
            const masks = probs.less(pm);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cast"])(masks, 'float32').mul(outerMasks);
        });
    }
    samplePredictions(predictions, temperature) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            predictions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$pow$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pow"])(predictions, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1 / temperature, 'float32'));
            const cmf = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cumsum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cumsum"])(predictions, 2, false, false);
            const totalMasses = cmf.slice([
                0,
                0,
                cmf.shape[2] - 1,
                0
            ], [
                cmf.shape[0],
                cmf.shape[1],
                1,
                cmf.shape[3]
            ]);
            const u = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_uniform$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["randomUniform"])(totalMasses.shape, 0, 1, 'float32');
            const i = u.mul(totalMasses).less(cmf).argMax(2);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["oneHot"])(i.flatten(), predictions.shape[2], 1, 0).reshape([
                predictions.shape[0],
                predictions.shape[1],
                predictions.shape[3],
                predictions.shape[2]
            ]).transpose([
                0,
                1,
                3,
                2
            ]);
        });
    }
}
;
 //# sourceMappingURL=model.js.map
}}),
"[project]/node_modules/@magenta/music/esm/coconet/index.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet/model.js [app-client] (ecmascript)"); //# sourceMappingURL=index.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/coconet/index.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/coconet/index.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "Coconet": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Coconet"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/coconet/index.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "Coconet": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Coconet"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet/index.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/coconet.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet/index.js [app-client] (ecmascript) <module evaluation>"); //# sourceMappingURL=coconet.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/coconet.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/music_rnn/attention.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "ATTENTION_PREFIX": (()=>ATTENTION_PREFIX),
    "AttentionWrapper": (()=>AttentionWrapper)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/zeros.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/concat.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/add.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mat_mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/mat_mul.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multi_rnn_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/multi_rnn_cell.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$reshape$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/reshape.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$conv2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/conv2d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/sum.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/mul.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tanh$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/tanh.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$softmax$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/softmax.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$slice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/slice.js [app-client] (ecmascript)");
;
const ATTENTION_PREFIX = 'attention_cell_wrapper/';
class AttentionWrapper {
    constructor(cells, attnLength, attnSize){
        this.cells = cells;
        this.attnLength = attnLength;
        this.attnSize = attnSize;
    }
    static isWrapped(vars) {
        return `rnn/${ATTENTION_PREFIX}kernel` in vars;
    }
    initialize(vars) {
        const prefix = `rnn/${ATTENTION_PREFIX}`;
        this.attnInputMatrix = vars[`${prefix}kernel`];
        this.attnInputBias = vars[`${prefix}bias`];
        this.attnW = vars[`${prefix}attention/attn_w`];
        this.attnV = vars[`${prefix}attention/attn_v`];
        this.attnMatrix = vars[`${prefix}attention/kernel`];
        this.attnBias = vars[`${prefix}attention/bias`];
        this.attnOutputMatrix = vars[`${prefix}attention_output_projection/kernel`];
        this.attnOutputBias = vars[`${prefix}attention_output_projection/bias`];
    }
    initState() {
        const attention = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
            this.attnSize
        ]);
        const attentionState = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
            1,
            this.attnSize * this.attnLength
        ]);
        return {
            attention,
            attentionState
        };
    }
    call(input, c, h, state) {
        const nextAttnInput = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])([
            input,
            state.attention.as2D(1, -1)
        ], 1);
        const nextRnnInput = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mat_mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["matMul"])(nextAttnInput, this.attnInputMatrix), this.attnInputBias.as2D(1, -1));
        [c, h] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multi_rnn_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["multiRNNCell"])(this.cells, nextRnnInput, c, h);
        const attnHidden = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$reshape$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["reshape"])(state.attentionState, [
            -1,
            this.attnLength,
            1,
            this.attnSize
        ]);
        const attnHiddenFeatures = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$conv2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["conv2d"])(attnHidden, this.attnW, [
            1,
            1
        ], 'same');
        const attnQueryParts = [];
        for(let q = 0; q < c.length; q++){
            attnQueryParts.push(c[q]);
            attnQueryParts.push(h[q]);
        }
        const attnQuery = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])(attnQueryParts, 1);
        const attnY = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mat_mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["matMul"])(attnQuery, this.attnMatrix).reshape([
            -1,
            1,
            1,
            this.attnSize
        ]);
        const attnS = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sum"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mul"])(this.attnV, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tanh$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tanh"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])(attnHiddenFeatures, attnY))), [
            2,
            3
        ]);
        const attnA = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$softmax$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["softmax"])(attnS);
        const attnD = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sum"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mul"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$reshape$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["reshape"])(attnA, [
            -1,
            this.attnLength,
            1,
            1
        ]), attnHidden), [
            1,
            2
        ]);
        const newAttns = attnD.reshape([
            -1,
            this.attnSize
        ]);
        const attnStates = state.attentionState.reshape([
            -1,
            this.attnLength,
            this.attnSize
        ]);
        const newAttnStates = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$slice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["slice"])(attnStates, [
            0,
            1,
            0
        ], [
            attnStates.shape[0],
            attnStates.shape[1] - 1,
            attnStates.shape[2]
        ]);
        const output = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mat_mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["matMul"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])([
            h[2],
            newAttns
        ], 1), this.attnOutputMatrix), this.attnOutputBias);
        const attention = newAttns.flatten();
        const attentionState = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])([
            newAttnStates,
            output.as3D(output.shape[0], 1, output.shape[1])
        ], 1).reshape([
            -1,
            this.attnLength * this.attnSize
        ]);
        return {
            output,
            c,
            h,
            attentionState: {
                attention,
                attentionState
            }
        };
    }
} //# sourceMappingURL=attention.js.map
}}),
"[project]/node_modules/@magenta/music/esm/music_rnn/model.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "MusicRNN": (()=>MusicRNN)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$io$2f$io$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__io$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/io/io.js [app-client] (ecmascript) <export * as io>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/scalar.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$basic_lstm_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/basic_lstm_cell.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/globals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/concat.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$stack$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/stack.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/zeros.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/split.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multinomial$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/multinomial.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$softmax$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/softmax.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/one_hot.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multi_rnn_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/multi_rnn_cell.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$aux_inputs$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/aux_inputs.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$chords$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/chords.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$data$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/data.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$data$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/data.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/compat/global.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/compat/global.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/logging.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$sequences$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/sequences.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$attention$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn/attention.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
;
const CELL_FORMAT = 'multi_rnn_cell/cell_%d/basic_lstm_cell/';
class MusicRNN {
    constructor(checkpointURL, spec){
        this.checkpointURL = checkpointURL;
        this.spec = spec;
        this.initialized = false;
        this.rawVars = {};
        this.biasShapes = [];
        this.lstmCells = [];
    }
    isInitialized() {
        return this.initialized;
    }
    instantiateFromSpec() {
        this.dataConverter = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$data$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["converterFromSpec"])(this.spec.dataConverter);
        this.attentionLength = this.spec.attentionLength;
        this.chordEncoder = this.spec.chordEncoder ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$chords$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["chordEncoderFromType"])(this.spec.chordEncoder) : undefined;
        this.auxInputs = this.spec.auxInputs ? this.spec.auxInputs.map((s)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$aux_inputs$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["auxiliaryInputFromSpec"])(s)) : undefined;
    }
    async initialize() {
        this.dispose();
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["performance"].now();
        if (!this.spec) {
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fetch"])(`${this.checkpointURL}/config.json`).then((response)=>response.json()).then((spec)=>{
                if (spec.type !== 'MusicRNN') {
                    throw new Error(`Attempted to instantiate MusicRNN model with incorrect type:
                  ${spec.type}`);
                }
                this.spec = spec;
            });
        }
        this.instantiateFromSpec();
        const vars = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fetch"])(`${this.checkpointURL}/weights_manifest.json`).then((response)=>response.json()).then((manifest)=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$io$2f$io$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__io$3e$__["io"].loadWeights(manifest, this.checkpointURL));
        const hasAttention = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$attention$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AttentionWrapper"].isWrapped(vars);
        const rnnPrefix = hasAttention ? `rnn/${__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$attention$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ATTENTION_PREFIX"]}` : 'rnn/';
        this.forgetBias = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1.0);
        this.lstmCells.length = 0;
        this.biasShapes.length = 0;
        let l = 0;
        while(true){
            const cellPrefix = rnnPrefix + CELL_FORMAT.replace('%d', l.toString());
            if (!(`${cellPrefix}kernel` in vars)) {
                break;
            }
            this.lstmCells.push((data, c, h)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$basic_lstm_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["basicLSTMCell"])(this.forgetBias, vars[`${cellPrefix}kernel`], vars[`${cellPrefix}bias`], data, c, h));
            this.biasShapes.push(vars[`${cellPrefix}bias`].shape[0]);
            ++l;
        }
        this.lstmFcW = vars['fully_connected/weights'];
        this.lstmFcB = vars['fully_connected/biases'];
        if (hasAttention) {
            this.attentionWrapper = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$attention$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["AttentionWrapper"](this.lstmCells, this.attentionLength, this.biasShapes[0] / 4);
            this.attentionWrapper.initialize(vars);
        }
        this.rawVars = vars;
        this.initialized = true;
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Initialized model', startTime, 'MusicRNN');
    }
    dispose() {
        Object.keys(this.rawVars).forEach((name)=>this.rawVars[name].dispose());
        this.rawVars = {};
        if (this.forgetBias) {
            this.forgetBias.dispose();
            this.forgetBias = undefined;
        }
        this.initialized = false;
    }
    async continueSequence(sequence, steps, temperature, chordProgression) {
        const result = await this.continueSequenceImpl(sequence, steps, temperature, chordProgression, false);
        return result.sequence;
    }
    async continueSequenceAndReturnProbabilities(sequence, steps, temperature, chordProgression) {
        return this.continueSequenceImpl(sequence, steps, temperature, chordProgression, true);
    }
    async continueSequenceImpl(sequence, steps, temperature, chordProgression, returnProbs) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$sequences$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["assertIsRelativeQuantizedSequence"])(sequence);
        if (this.chordEncoder && !chordProgression) {
            throw new Error('Chord progression expected but not provided.');
        }
        if (!this.chordEncoder && chordProgression) {
            throw new Error('Unexpected chord progression provided.');
        }
        if (!this.initialized) {
            await this.initialize();
        }
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["performance"].now();
        const oh = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const inputs = this.dataConverter.toTensor(sequence);
            const length = inputs.shape[0];
            const outputSize = inputs.shape[1];
            const controls = this.chordEncoder ? this.chordEncoder.encodeProgression(chordProgression, length + steps) : undefined;
            const auxInputs = this.auxInputs ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])(this.auxInputs.map((auxInput)=>auxInput.getTensors(length + steps)), 1) : undefined;
            const rnnResult = this.sampleRnn(inputs, steps, temperature, controls, auxInputs, returnProbs);
            const samples = rnnResult.samples;
            return {
                samples: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$stack$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["stack"])(samples).as2D(samples.length, outputSize),
                probs: rnnResult.probs
            };
        });
        const samplesAndProbs = await oh;
        const result = this.dataConverter.toNoteSequence(samplesAndProbs.samples, sequence.quantizationInfo.stepsPerQuarter);
        const probs = [];
        if (returnProbs) {
            for(let i = 0; i < samplesAndProbs.probs.length; i++){
                probs.push(await samplesAndProbs.probs[i].data());
                samplesAndProbs.probs[i].dispose();
            }
        }
        oh.samples.dispose();
        result.then(()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Continuation completed', startTime, 'MusicRNN', 20));
        return {
            sequence: result,
            probs
        };
    }
    sampleRnn(inputs, steps, temperature, controls, auxInputs, returnProbs) {
        const length = inputs.shape[0];
        const outputSize = inputs.shape[1];
        let c = [];
        let h = [];
        for(let i = 0; i < this.biasShapes.length; i++){
            c.push((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
                1,
                this.biasShapes[i] / 4
            ]));
            h.push((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
                1,
                this.biasShapes[i] / 4
            ]));
        }
        let attentionState = this.attentionWrapper ? this.attentionWrapper.initState() : null;
        let lastOutput;
        inputs = inputs.toFloat();
        const samples = [];
        const probs = [];
        const splitInputs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(inputs.toFloat(), length);
        const splitControls = controls ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(controls, controls.shape[0]) : undefined;
        const splitAuxInputs = auxInputs ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(auxInputs, auxInputs.shape[0]) : undefined;
        for(let i = 0; i < length + steps; i++){
            let nextInput;
            if (i < length) {
                nextInput = splitInputs[i];
            } else {
                let logits = lastOutput.matMul(this.lstmFcW).add(this.lstmFcB).as1D();
                let sampledOutput;
                if (temperature) {
                    logits = logits.div((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(temperature));
                    sampledOutput = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multinomial$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["multinomial"])(logits, 1).as1D();
                } else {
                    sampledOutput = logits.argMax().as1D();
                }
                if (returnProbs) {
                    probs.push((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$softmax$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["softmax"])(logits));
                }
                nextInput = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["oneHot"])(sampledOutput, outputSize).toFloat();
                samples.push(nextInput.as1D());
            }
            if (i === length + steps - 1) {
                break;
            }
            const tensors = [];
            if (splitControls) {
                tensors.push(splitControls[i + 1]);
            }
            tensors.push(nextInput);
            if (splitAuxInputs) {
                tensors.push(splitAuxInputs[i]);
            }
            nextInput = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])(tensors, 1);
            if (this.attentionWrapper) {
                const wrapperOutput = this.attentionWrapper.call(nextInput, c, h, attentionState);
                c = wrapperOutput.c;
                h = wrapperOutput.h;
                attentionState = wrapperOutput.attentionState;
                lastOutput = wrapperOutput.output;
            } else {
                [c, h] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multi_rnn_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["multiRNNCell"])(this.lstmCells, nextInput, c, h);
                lastOutput = h[h.length - 1];
            }
        }
        return {
            samples,
            probs
        };
    }
} //# sourceMappingURL=model.js.map
}}),
"[project]/node_modules/@magenta/music/esm/music_rnn/index.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn/model.js [app-client] (ecmascript)"); //# sourceMappingURL=index.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/music_rnn/index.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/music_rnn/index.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "MusicRNN": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MusicRNN"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/music_rnn/index.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "MusicRNN": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MusicRNN"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn/index.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/music_rnn.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn/index.js [app-client] (ecmascript) <module evaluation>"); //# sourceMappingURL=music_rnn.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/music_rnn.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/music_vae/midi_me.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "MidiMe": (()=>MidiMe)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/globals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/add.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/mul.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_normal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/random_normal.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-layers/dist/exports_layers.js [app-client] (ecmascript) <export * as layers>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-layers/dist/exports.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$environment$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/environment.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$train$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/train.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$browser_util$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/browser_util.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$pow$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/pow.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sub$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/sub.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$div$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/div.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$ones$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/ones.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mean$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/mean.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/sum.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$log$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/log.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/logging.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/compat/global.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/compat/global.js [app-client] (ecmascript) <locals>");
;
;
;
;
class SamplingLayer extends __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].Layer {
    constructor(){
        super({});
    }
    computeOutputShape(inputShape) {
        return inputShape[0];
    }
    call(inputs) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const [mu, sigma] = inputs;
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mul"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_normal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["randomNormal"])(sigma.shape), sigma), mu);
        });
    }
    getClassName() {
        return 'SamplingLayer';
    }
}
class MidiMe {
    constructor(config = {}){
        this.trained = false;
        this.initialized = false;
        this.config = {
            encoder_layers: config.encoder_layers || [
                1024,
                256,
                64
            ],
            decoder_layers: config.decoder_layers || [
                64,
                256,
                1024
            ],
            input_size: config.input_size || 256,
            latent_size: config.latent_size || 4,
            beta: config.beta || 1,
            epochs: config.epochs || 10
        };
    }
    dispose() {
        if (!this.initialized) {
            return;
        }
        this.encoder.dispose();
        this.decoder.dispose();
        this.vae.dispose();
        this.initialized = false;
    }
    initialize() {
        this.dispose();
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["performance"].now();
        const x = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["input"])({
            shape: [
                this.config['input_size']
            ]
        });
        this.encoder = this.getEncoder(x);
        const [z, , ] = this.encoder.apply(x);
        this.decoder = this.getDecoder(z.shape.slice(1));
        const y = this.decoder.apply(z);
        this.vae = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["model"])({
            inputs: x,
            outputs: y,
            name: 'vae'
        });
        this.initialized = true;
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Initialized model', startTime, 'MidiMe');
    }
    async train(xTrain, callback) {
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["performance"].now();
        this.trained = false;
        let learningRate = 0.001;
        if (__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$environment$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ENV"].get('WEBGL_RENDER_FLOAT32_ENABLED') === false && __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$environment$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ENV"].get('WEBGL_DOWNLOAD_FLOAT_ENABLED') === false && __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$environment$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ENV"].get('WEBGL_VERSION') === 1) {
            learningRate = 0.00005;
        }
        const optimizer = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$train$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["train"].adam(learningRate);
        for(let e = 0; e < this.config.epochs; e++){
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$browser_util$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["nextFrame"])();
            await optimizer.minimize(()=>{
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
                    const [, zMu, zSigma] = this.encoder.predict(xTrain);
                    const y = this.vae.predict(xTrain);
                    const loss = this.loss(zMu, zSigma, y, xTrain);
                    if (callback) {
                        callback(e, {
                            y,
                            total: loss.totalLoss.arraySync(),
                            losses: [
                                loss.reconLoss.arraySync(),
                                loss.latentLoss.arraySync()
                            ]
                        });
                    }
                    return loss.totalLoss;
                });
            });
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$browser_util$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["nextFrame"])();
        }
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Training finished', startTime, 'MidiMe');
        this.trained = true;
        optimizer.dispose();
    }
    async sample(numSamples = 1) {
        if (!this.initialized) {
            await this.initialize();
        }
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const randZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_normal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["randomNormal"])([
                numSamples,
                this.config['latent_size']
            ]);
            return this.decoder.predict(randZs);
        });
    }
    async decode(z) {
        if (!this.initialized) {
            await this.initialize();
        }
        return this.decoder.predict(z);
    }
    async encode(z) {
        if (!this.initialized) {
            await this.initialize();
        }
        const [z_, , ] = this.encoder.predict(z);
        return z_;
    }
    predict(z) {
        return this.vae.predict(z);
    }
    getEncoder(input) {
        let x = input;
        for(let i = 0; i < this.config['encoder_layers'].length; i++){
            x = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].dense({
                units: this.config['encoder_layers'][i],
                activation: 'relu'
            }).apply(x);
        }
        const mu = this.getAffineLayers(x, this.config['latent_size'], input, false);
        const sigma = this.getAffineLayers(x, this.config['latent_size'], input, true);
        const z = new SamplingLayer().apply([
            mu,
            sigma
        ]);
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["model"])({
            inputs: input,
            outputs: [
                z,
                mu,
                sigma
            ],
            name: 'encoder'
        });
    }
    getDecoder(shape) {
        const z = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["input"])({
            shape
        });
        let x = z;
        for(let i = 0; i < this.config['decoder_layers'].length; i++){
            x = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].dense({
                units: this.config['decoder_layers'][i],
                activation: 'relu'
            }).apply(x);
        }
        const mu = this.getAffineLayers(x, this.config['input_size'], z, false);
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["model"])({
            inputs: z,
            outputs: mu,
            name: 'decoder'
        });
    }
    loss(zMu, zSigma, yPred, yTrue) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const latentLoss = this.klLoss(zMu, zSigma);
            const reconLoss = this.reconstructionLoss(yTrue, yPred);
            const totalLoss = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])(reconLoss, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mul"])(latentLoss, this.config['beta']));
            return {
                latentLoss,
                reconLoss,
                totalLoss
            };
        });
    }
    reconstructionLoss(yTrue, yPred) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const se = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$pow$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pow"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sub$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sub"])(yTrue, yPred), 2);
            const nll = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$div$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["div"])(se, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mul"])(2, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$pow$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pow"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$ones$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ones"])([
                1
            ]), 2)));
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mean$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mean"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sum"])(nll, -1));
        });
    }
    klLoss(mu, sigma) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const mu2 = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$pow$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pow"])(mu, 2);
            const sigma2 = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$pow$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pow"])(sigma, 2);
            const term1 = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])(1, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$log$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["log"])(sigma2));
            const term2 = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])(mu2, sigma2);
            const term = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sub$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sub"])(term1, term2);
            const div = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$div$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["div"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mean$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mean"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sum"])(term, -1)), 2);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mul"])(-1, div);
        });
    }
    getAffineLayers(x, outputSize, z_, softplus) {
        const linear = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].dense({
            units: outputSize
        });
        const output = linear.apply(x);
        if (softplus) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].activation({
                activation: 'softplus'
            }).apply(output);
        } else {
            return output;
        }
    }
} //# sourceMappingURL=midi_me.js.map
}}),
"[project]/node_modules/@magenta/music/esm/music_vae/model.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "Decoder": (()=>Decoder),
    "Encoder": (()=>Encoder),
    "LayerVars": (()=>LayerVars),
    "MusicVAE": (()=>MusicVAE),
    "Nade": (()=>Nade)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/globals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$expand_dims$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/expand_dims.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/zeros.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/concat.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$stack$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/stack.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/split.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tile$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/tile.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$squeeze$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/squeeze.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multi_rnn_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/multi_rnn_cell.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$greater_equal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/greater_equal.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sigmoid$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/sigmoid.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/scalar.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_uniform$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/random_uniform.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multinomial$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/multinomial.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/one_hot.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tanh$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/tanh.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$greater$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/greater.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mat_mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/mat_mul.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$outer_product$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/outer_product.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$io$2f$io$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__io$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/io/io.js [app-client] (ecmascript) <export * as io>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$fill$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/fill.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/concat_2d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$min$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/min.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$equal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/equal.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_3d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/concat_3d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$linspace$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/linspace.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$binary_ops$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/binary_ops.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_normal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/random_normal.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/add.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$basic_lstm_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/basic_lstm_cell.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$slice3d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/slice3d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$chords$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/chords.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/compat/global.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/compat/global.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/constants.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$data$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/data.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$data$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/data.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/logging.js [app-client] (ecmascript)");
;
;
;
;
;
;
class LayerVars {
    constructor(kernel, bias){
        if (kernel === undefined) {
            throw Error('`kernel` is undefined.');
        }
        if (bias === undefined) {
            throw Error('`bias` is undefined.');
        }
        this.kernel = kernel;
        this.bias = bias;
    }
}
function dense(vars, inputs) {
    return inputs.matMul(vars.kernel).add(vars.bias);
}
class Encoder {
}
class BidirectionalLstm {
    constructor(lstmFwVars, lstmBwVars){
        this.lstmFwVars = lstmFwVars;
        this.lstmBwVars = lstmBwVars;
    }
    process(sequence) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const fwStates = this.singleDirection(sequence, true);
            const bwStates = this.singleDirection(sequence, false);
            return [
                fwStates,
                bwStates
            ];
        });
    }
    singleDirection(inputs, fw) {
        const batchSize = inputs.shape[0];
        const length = inputs.shape[1];
        const lstmVars = fw ? this.lstmFwVars : this.lstmBwVars;
        let state = [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
                batchSize,
                lstmVars.bias.shape[0] / 4
            ]),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
                batchSize,
                lstmVars.bias.shape[0] / 4
            ])
        ];
        const forgetBias = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1.0);
        const lstm = (data, state)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$basic_lstm_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["basicLSTMCell"])(forgetBias, lstmVars.kernel, lstmVars.bias, data, state[0], state[1]);
        const splitInputs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(inputs.toFloat(), length, 1);
        const outputStates = [];
        for (const data of fw ? splitInputs : splitInputs.reverse()){
            state = lstm(data.squeeze([
                1
            ]), state);
            outputStates.push(state[1]);
        }
        return fw ? outputStates : outputStates.reverse();
    }
}
class BidirectionalLstmEncoder extends Encoder {
    constructor(lstmFwVars, lstmBwVars, muVars){
        super();
        this.bidirectionalLstm = new BidirectionalLstm(lstmFwVars, lstmBwVars);
        this.muVars = muVars;
        this.zDims = muVars ? this.muVars.bias.shape[0] : null;
    }
    encode(sequence, segmentLengths) {
        if (segmentLengths) {
            throw new Error('Variable-length segments not supported in flat encoder');
        }
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const [fwStates, bwStates] = this.bidirectionalLstm.process(sequence);
            const finalState = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])([
                fwStates[fwStates.length - 1],
                bwStates[0]
            ], 1);
            if (this.muVars) {
                return dense(this.muVars, finalState);
            } else {
                return finalState;
            }
        });
    }
}
class HierarchicalEncoder extends Encoder {
    constructor(baseEncoders, numSteps, muVars){
        super();
        this.baseEncoders = baseEncoders;
        this.numSteps = numSteps;
        this.muVars = muVars;
        this.zDims = this.muVars.bias.shape[0];
    }
    encode(sequence, segmentLengths) {
        if (segmentLengths) {
            if (sequence.shape[0] !== 1) {
                throw new Error('When using variable-length segments, batch size must be 1.');
            }
            if (segmentLengths.length !== this.numSteps[0]) {
                throw new Error('Must provide length for all variable-length segments.');
            }
        }
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            let inputs = sequence;
            for(let level = 0; level < this.baseEncoders.length; ++level){
                const levelSteps = this.numSteps[level];
                const splitInputs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(inputs, levelSteps, 1);
                const embeddings = [];
                for(let step = 0; step < levelSteps; ++step){
                    embeddings.push(this.baseEncoders[level].encode(level === 0 && segmentLengths ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$slice3d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["slice3d"])(splitInputs[step], [
                        0,
                        0,
                        0
                    ], [
                        1,
                        segmentLengths[step],
                        -1
                    ]) : splitInputs[step]));
                }
                inputs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$stack$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["stack"])(embeddings, 1);
            }
            return dense(this.muVars, inputs.squeeze([
                1
            ]));
        });
    }
}
function initLstmCells(z, lstmCellVars, zToInitStateVars) {
    const lstmCells = [];
    const c = [];
    const h = [];
    const initialStates = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(dense(zToInitStateVars, z).tanh(), 2 * lstmCellVars.length, 1);
    for(let i = 0; i < lstmCellVars.length; ++i){
        const lv = lstmCellVars[i];
        const forgetBias = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1.0);
        lstmCells.push((data, c, h)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$basic_lstm_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["basicLSTMCell"])(forgetBias, lv.kernel, lv.bias, data, c, h));
        c.push(initialStates[i * 2]);
        h.push(initialStates[i * 2 + 1]);
    }
    return {
        'cell': lstmCells,
        'c': c,
        'h': h
    };
}
class Decoder {
}
class BaseDecoder extends Decoder {
    constructor(lstmCellVars, zToInitStateVars, outputProjectVars, outputDims, controlLstmFwVars, controlLstmBwVars){
        super();
        this.lstmCellVars = lstmCellVars;
        this.zToInitStateVars = zToInitStateVars;
        this.outputProjectVars = outputProjectVars;
        this.zDims = this.zToInitStateVars.kernel.shape[0];
        this.outputDims = outputDims || outputProjectVars.bias.shape[0];
        if (controlLstmFwVars && controlLstmBwVars) {
            this.controlBidirectionalLstm = new BidirectionalLstm(controlLstmFwVars, controlLstmBwVars);
        }
    }
    decode(z, length, initialInput, temperature, controls) {
        const batchSize = z.shape[0];
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const lstmCell = initLstmCells(z, this.lstmCellVars, this.zToInitStateVars);
            let expandedControls = controls ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$expand_dims$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["expandDims"])(controls, 0) : undefined;
            const samples = [];
            let nextInput = initialInput ? initialInput : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
                batchSize,
                this.outputDims
            ]);
            if (this.controlBidirectionalLstm) {
                const [fwStates, bwStates] = this.controlBidirectionalLstm.process(expandedControls);
                expandedControls = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])([
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$stack$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["stack"])(fwStates, 1),
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$stack$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["stack"])(bwStates, 1)
                ], 2);
            }
            const splitControls = expandedControls ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tile$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tile"])(expandedControls, [
                batchSize,
                1,
                1
            ]), controls.shape[0], 1) : undefined;
            for(let i = 0; i < length; ++i){
                const toConcat = splitControls ? [
                    nextInput,
                    z,
                    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$squeeze$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["squeeze"])(splitControls[i], [
                        1
                    ])
                ] : [
                    nextInput,
                    z
                ];
                [lstmCell.c, lstmCell.h] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multi_rnn_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["multiRNNCell"])(lstmCell.cell, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])(toConcat, 1), lstmCell.c, lstmCell.h);
                const lstmOutput = dense(this.outputProjectVars, lstmCell.h[lstmCell.h.length - 1]);
                nextInput = this.sample(lstmOutput, temperature);
                samples.push(nextInput);
            }
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$stack$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["stack"])(samples, 1);
        });
    }
}
class BooleanDecoder extends BaseDecoder {
    sample(lstmOutput, temperature) {
        const logits = lstmOutput;
        return (temperature ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$greater_equal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["greaterEqual"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sigmoid$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sigmoid"])(logits.div((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(temperature))), (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_uniform$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["randomUniform"])(logits.shape)) : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$greater_equal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["greaterEqual"])(logits, 0)).toFloat();
    }
}
class CategoricalDecoder extends BaseDecoder {
    sample(lstmOutput, temperature) {
        const logits = lstmOutput;
        const timeLabels = temperature ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multinomial$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["multinomial"])(logits.div((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(temperature)), 1).as1D() : logits.argMax(1).as1D();
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["oneHot"])(timeLabels, this.outputDims).toFloat();
    }
}
class NadeDecoder extends BaseDecoder {
    constructor(lstmCellVars, zToInitStateVars, outputProjectVars, nade, controlLstmFwVars, controlLstmBwVars){
        super(lstmCellVars, zToInitStateVars, outputProjectVars, nade.numDims, controlLstmFwVars, controlLstmBwVars);
        this.nade = nade;
    }
    sample(lstmOutput, temperature) {
        const [encBias, decBias] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(lstmOutput, [
            this.nade.numHidden,
            this.nade.numDims
        ], 1);
        return this.nade.sample(encBias, decBias);
    }
}
class GrooveDecoder extends BaseDecoder {
    sample(lstmOutput, temperature) {
        let [hits, velocities, offsets] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(lstmOutput, 3, 1);
        velocities = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sigmoid$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sigmoid"])(velocities);
        offsets = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tanh$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tanh"])(offsets);
        if (temperature) {
            hits = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sigmoid$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sigmoid"])(hits.div((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(temperature)));
            const threshold = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_uniform$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["randomUniform"])(hits.shape, 0, 1);
            hits = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$greater$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["greater"])(hits, threshold).toFloat();
        } else {
            hits = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$greater$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["greater"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sigmoid$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sigmoid"])(hits), 0.5).toFloat();
        }
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])([
            hits,
            velocities,
            offsets
        ], 1);
    }
}
class SplitDecoder extends Decoder {
    constructor(coreDecoders){
        super();
        this.coreDecoders = coreDecoders;
        this.numDecoders = this.coreDecoders.length;
        this.zDims = this.coreDecoders[0].zDims;
        this.outputDims = this.coreDecoders.reduce((dims, dec)=>dims + dec.outputDims, 0);
    }
    decodeSeparately(z, length, initialInput, temperature, controls) {
        const samples = [];
        for(let i = 0; i < this.coreDecoders.length; ++i){
            samples.push(this.coreDecoders[i].decode(z, length, initialInput[i], temperature, controls));
        }
        return samples;
    }
    decode(z, length, initialInput, temperature, controls) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const samples = this.decodeSeparately(z, length, this.coreDecoders.map((_)=>initialInput), temperature, controls);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])(samples, -1);
        });
    }
}
class ConductorDecoder extends Decoder {
    constructor(coreDecoders, lstmCellVars, zToInitStateVars, numSteps){
        super();
        this.splitDecoder = new SplitDecoder(coreDecoders);
        this.lstmCellVars = lstmCellVars;
        this.zToInitStateVars = zToInitStateVars;
        this.numSteps = numSteps;
        this.zDims = this.zToInitStateVars.kernel.shape[0];
        this.outputDims = this.splitDecoder.outputDims;
    }
    decode(z, length, initialInput, temperature, controls) {
        const batchSize = z.shape[0];
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const lstmCell = initLstmCells(z, this.lstmCellVars, this.zToInitStateVars);
            const samples = [];
            let initialInput = new Array(this.splitDecoder.numDecoders).fill(undefined);
            const dummyInput = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
                batchSize,
                1
            ]);
            const splitControls = controls ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(controls, this.numSteps) : undefined;
            for(let i = 0; i < this.numSteps; ++i){
                [lstmCell.c, lstmCell.h] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multi_rnn_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["multiRNNCell"])(lstmCell.cell, dummyInput, lstmCell.c, lstmCell.h);
                const currSamples = this.splitDecoder.decodeSeparately(lstmCell.h[lstmCell.h.length - 1], length / this.numSteps, initialInput, temperature, splitControls ? splitControls[i] : undefined);
                samples.push((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])(currSamples, -1));
                initialInput = currSamples.map((s)=>s.slice([
                        0,
                        s.shape[1] - 1,
                        0
                    ], [
                        batchSize,
                        1,
                        s.shape[s.rank - 1]
                    ]).squeeze([
                        1
                    ]).toFloat());
            }
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])(samples, 1);
        });
    }
}
class Nade {
    constructor(encWeights, decWeightsT){
        this.numDims = encWeights.shape[0];
        this.numHidden = encWeights.shape[2];
        this.encWeights = encWeights.as2D(this.numDims, this.numHidden);
        this.decWeightsT = decWeightsT.as2D(this.numDims, this.numHidden);
    }
    sample(encBias, decBias) {
        const batchSize = encBias.shape[0];
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const samples = [];
            let a = encBias.clone();
            for(let i = 0; i < this.numDims; i++){
                const h = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sigmoid$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sigmoid"])(a);
                const encWeightsI = this.encWeights.slice([
                    i,
                    0
                ], [
                    1,
                    this.numHidden
                ]).as1D();
                const decWeightsTI = this.decWeightsT.slice([
                    i,
                    0
                ], [
                    1,
                    this.numHidden
                ]);
                const decBiasI = decBias.slice([
                    0,
                    i
                ], [
                    batchSize,
                    1
                ]);
                const contfogitsI = decBiasI.add((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mat_mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["matMul"])(h, decWeightsTI, false, true));
                const condProbsI = contfogitsI.sigmoid();
                const samplesI = condProbsI.greaterEqual((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(0.5)).toFloat().as1D();
                if (i < this.numDims - 1) {
                    a = a.add((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$outer_product$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["outerProduct"])(samplesI.toFloat(), encWeightsI));
                }
                samples.push(samplesI);
            }
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$stack$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["stack"])(samples, 1);
        });
    }
}
class MusicVAE {
    constructor(checkpointURL, spec){
        this.initialized = false;
        this.checkpointURL = checkpointURL;
        this.spec = spec;
    }
    instantiateFromSpec() {
        this.dataConverter = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$data$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["converterFromSpec"])(this.spec.dataConverter);
        this.chordEncoder = this.spec.chordEncoder ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$chords$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["chordEncoderFromType"])(this.spec.chordEncoder) : undefined;
    }
    dispose() {
        if (this.rawVars !== undefined) {
            Object.keys(this.rawVars).forEach((name)=>this.rawVars[name].dispose());
        }
        this.encoder = undefined;
        this.decoder = undefined;
        this.initialized = false;
    }
    getLstmLayers(cellFormat, vars) {
        const lstmLayers = [];
        let l = 0;
        while(true){
            const cellPrefix = cellFormat.replace('%d', l.toString());
            if (!(cellPrefix + 'kernel' in vars)) {
                break;
            }
            lstmLayers.push(new LayerVars(vars[cellPrefix + 'kernel'], vars[cellPrefix + 'bias']));
            ++l;
        }
        return lstmLayers;
    }
    async initialize() {
        this.dispose();
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["performance"].now();
        if (!this.spec) {
            await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fetch"])(`${this.checkpointURL}/config.json`).then((response)=>response.json()).then((spec)=>{
                if (spec.type !== 'MusicVAE') {
                    throw new Error(`Attempted to instantiate MusicVAE model with incorrect type:
                  ${spec.type}`);
                }
                this.spec = spec;
            });
        }
        this.instantiateFromSpec();
        const LSTM_CELL_FORMAT = 'cell_%d/lstm_cell/';
        const MUTLI_LSTM_CELL_FORMAT = `multi_rnn_cell/${LSTM_CELL_FORMAT}`;
        const CONDUCTOR_PREFIX = 'decoder/hierarchical_level_0/';
        const BIDI_LSTM_CELL = 'cell_%d/bidirectional_rnn/%s/multi_rnn_cell/cell_0/lstm_cell/';
        const ENCODER_FORMAT = `encoder/${BIDI_LSTM_CELL}`;
        const HIER_ENCODER_FORMAT = `encoder/hierarchical_level_%d/${BIDI_LSTM_CELL.replace('%d', '0')}`;
        const CONTROL_BIDI_LSTM_CELL = `control_preprocessing/${BIDI_LSTM_CELL}`;
        const vars = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fetch"])(`${this.checkpointURL}/weights_manifest.json`).then((response)=>response.json()).then((manifest)=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$io$2f$io$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__io$3e$__["io"].loadWeights(manifest, this.checkpointURL));
        this.rawVars = vars;
        const encMu = new LayerVars(vars['encoder/mu/kernel'], vars['encoder/mu/bias']);
        if (this.dataConverter.numSegments) {
            const fwLayers = this.getLstmLayers(HIER_ENCODER_FORMAT.replace('%s', 'fw'), vars);
            const bwLayers = this.getLstmLayers(HIER_ENCODER_FORMAT.replace('%s', 'bw'), vars);
            if (fwLayers.length !== bwLayers.length || fwLayers.length !== 2) {
                throw Error('Only 2 hierarchical encoder levels are supported. ' + `Got ${fwLayers.length} forward and ${bwLayers.length} ` + 'backward.');
            }
            const baseEncoders = [
                0,
                1
            ].map((l)=>new BidirectionalLstmEncoder(fwLayers[l], bwLayers[l]));
            this.encoder = new HierarchicalEncoder(baseEncoders, [
                this.dataConverter.numSegments,
                1
            ], encMu);
        } else {
            const fwLayers = this.getLstmLayers(ENCODER_FORMAT.replace('%s', 'fw'), vars);
            const bwLayers = this.getLstmLayers(ENCODER_FORMAT.replace('%s', 'bw'), vars);
            if (fwLayers.length !== bwLayers.length || fwLayers.length !== 1) {
                throw Error('Only single-layer bidirectional encoders are supported. ' + `Got ${fwLayers.length} forward and ${bwLayers.length} ` + 'backward.');
            }
            this.encoder = new BidirectionalLstmEncoder(fwLayers[0], bwLayers[0], encMu);
        }
        const hasControlBidiLayers = `${CONTROL_BIDI_LSTM_CELL.replace('%s', 'fw').replace('%d', '0')}kernel` in vars;
        const decVarPrefix = this.dataConverter.numSegments ? 'core_decoder/' : '';
        const decVarPrefixes = [];
        if (this.dataConverter.NUM_SPLITS) {
            for(let i = 0; i < this.dataConverter.NUM_SPLITS; ++i){
                decVarPrefixes.push(`${decVarPrefix}core_decoder_${i}/decoder/`);
            }
        } else {
            decVarPrefixes.push(`${decVarPrefix}decoder/`);
        }
        let controlLstmFwLayers = [
            null
        ];
        let controlLstmBwLayers = [
            null
        ];
        if (hasControlBidiLayers) {
            controlLstmFwLayers = this.getLstmLayers(CONTROL_BIDI_LSTM_CELL.replace('%s', 'fw'), vars);
            controlLstmBwLayers = this.getLstmLayers(CONTROL_BIDI_LSTM_CELL.replace('%s', 'bw'), vars);
            if (controlLstmFwLayers.length !== controlLstmBwLayers.length || controlLstmFwLayers.length !== 1) {
                throw Error('Only single-layer bidirectional control preprocessing is ' + 'supported. Got ' + `${controlLstmFwLayers.length} forward and ${controlLstmBwLayers.length} backward.`);
            }
        }
        const baseDecoders = decVarPrefixes.map((varPrefix)=>{
            const decLstmLayers = this.getLstmLayers(varPrefix + MUTLI_LSTM_CELL_FORMAT, vars);
            const decZtoInitState = new LayerVars(vars[`${varPrefix}z_to_initial_state/kernel`], vars[`${varPrefix}z_to_initial_state/bias`]);
            const decOutputProjection = new LayerVars(vars[`${varPrefix}output_projection/kernel`], vars[`${varPrefix}output_projection/bias`]);
            if (`${varPrefix}nade/w_enc` in vars) {
                return new NadeDecoder(decLstmLayers, decZtoInitState, decOutputProjection, new Nade(vars[`${varPrefix}nade/w_enc`], vars[`${varPrefix}nade/w_dec_t`]), controlLstmFwLayers[0], controlLstmBwLayers[0]);
            } else if (this.spec.dataConverter.type === 'GrooveConverter') {
                return new GrooveDecoder(decLstmLayers, decZtoInitState, decOutputProjection, undefined, controlLstmFwLayers[0], controlLstmBwLayers[0]);
            } else if (this.spec.useBooleanDecoder) {
                return new BooleanDecoder(decLstmLayers, decZtoInitState, decOutputProjection, undefined, controlLstmFwLayers[0], controlLstmBwLayers[0]);
            } else {
                return new CategoricalDecoder(decLstmLayers, decZtoInitState, decOutputProjection, undefined, controlLstmFwLayers[0], controlLstmBwLayers[0]);
            }
        });
        if (this.dataConverter.numSegments) {
            const condLstmLayers = this.getLstmLayers(CONDUCTOR_PREFIX + LSTM_CELL_FORMAT, vars);
            const condZtoInitState = new LayerVars(vars[`${CONDUCTOR_PREFIX}initial_state/kernel`], vars[`${CONDUCTOR_PREFIX}initial_state/bias`]);
            this.decoder = new ConductorDecoder(baseDecoders, condLstmLayers, condZtoInitState, this.dataConverter.numSegments);
        } else if (baseDecoders.length === 1) {
            this.decoder = baseDecoders[0];
        } else {
            this.decoder = new SplitDecoder(baseDecoders);
        }
        this.zDims = this.decoder.zDims;
        this.initialized = true;
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Initialized model', startTime, 'MusicVAE');
    }
    isInitialized() {
        return this.initialized;
    }
    checkControlArgs(controlArgs) {
        controlArgs = controlArgs || {};
        const extraControls = controlArgs.extraControls || {};
        if (this.chordEncoder && !controlArgs.chordProgression) {
            throw new Error('Chord progression expected but not provided.');
        }
        if (!this.chordEncoder && controlArgs.chordProgression) {
            throw new Error('Unexpected chord progression provided.');
        }
        if (this.chordEncoder && this.dataConverter.endTensor && controlArgs.chordProgression.length > 1) {
            throw new Error('Multiple chords not supported when using variable-length segments.');
        }
        if (this.spec.conditionOnKey && controlArgs.key == null) {
            throw new Error('Key expected but not provided.');
        }
        if (!this.spec.conditionOnKey && controlArgs.key != null) {
            throw new Error('Unexpected key provided.');
        }
        if (this.spec.extraControls) {
            for (const controlSpec of this.spec.extraControls){
                if (controlSpec.name in extraControls) {
                    if (extraControls[controlSpec.name].shape[1] !== controlSpec.depth) {
                        throw new Error(`Control signal ${controlSpec.name} has invalid depth: ${extraControls[controlSpec.name].shape[1]} != ${controlSpec.depth}`);
                    }
                } else {
                    throw new Error(`Missing control signal: ${controlSpec.name}`);
                }
            }
        }
        const controlNames = this.spec.extraControls ? new Set(this.spec.extraControls.map((controlSpec)=>controlSpec.name)) : new Set();
        for(const name in extraControls){
            if (!controlNames.has(name)) {
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["log"])(`Unspecified control signal provided: ${name}`, 'MusicVAE', 5);
            }
        }
    }
    controlArgsToTensor(controlArgs) {
        controlArgs = controlArgs || {};
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const controls = [];
            if (controlArgs.chordProgression) {
                const encodedChords = this.encodeChordProgression(controlArgs.chordProgression);
                controls.push(encodedChords);
            }
            if (controlArgs.key != null) {
                const encodedKey = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["oneHot"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$fill$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["fill"])([
                    this.dataConverter.numSteps
                ], controlArgs.key, 'int32'), 12);
                controls.push(encodedKey);
            }
            if (controlArgs.extraControls) {
                for (const controlSpec of this.spec.extraControls){
                    controls.push(controlArgs.extraControls[controlSpec.name]);
                }
            }
            return controls.length ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat2d"])(controls, 1) : undefined;
        });
    }
    async interpolateTensors(inputTensors, numInterps, temperature, controlArgs) {
        if (!this.initialized) {
            await this.initialize();
        }
        const inputZs = await this.encodeTensors(inputTensors, controlArgs);
        const interpZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>this.getInterpolatedZs(inputZs, numInterps));
        inputZs.dispose();
        const outputTensors = await this.decodeTensors(interpZs, temperature, controlArgs);
        interpZs.dispose();
        return outputTensors;
    }
    async interpolate(inputSequences, numInterps, temperature, controlArgs) {
        this.checkControlArgs(controlArgs);
        if (!this.initialized) {
            await this.initialize();
        }
        const startTime = 0;
        const inputZs = await this.encode(inputSequences, controlArgs);
        const interpZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>this.getInterpolatedZs(inputZs, numInterps));
        inputZs.dispose();
        const outputSequences = this.decode(interpZs, temperature, controlArgs);
        interpZs.dispose();
        outputSequences.then(()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Interpolation completed', startTime, 'MusicVAE', 20));
        return outputSequences;
    }
    async getSegmentLengths(inputTensors) {
        if (inputTensors.shape[0] > 1) {
            throw new Error('Variable-length segments not supported for batch size > 1.');
        }
        const numSteps = this.dataConverter.numSteps;
        const numSegments = this.dataConverter.numSegments;
        const isEndTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$min$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["min"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$equal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["equal"])(inputTensors.squeeze([
                0
            ]), this.dataConverter.endTensor.expandDims(0)), 1));
        const isEndArray = await isEndTensor.data();
        isEndTensor.dispose();
        const maxSegmentLength = numSteps / numSegments;
        const segmentLengths = [];
        let offset = 0;
        let fromIndex = isEndArray.indexOf(1);
        while(fromIndex !== -1){
            segmentLengths.push(fromIndex - offset + 1);
            offset += maxSegmentLength;
            fromIndex = isEndArray.indexOf(1, offset);
        }
        if (segmentLengths.length !== numSegments) {
            throw new Error(`Incorrect number of segments: ${segmentLengths.length} != ${numSegments}`);
        }
        return segmentLengths;
    }
    encodeChordProgression(chordProgression) {
        const numSteps = this.dataConverter.numSteps;
        const numSegments = this.dataConverter.numSegments;
        const numChordSteps = this.dataConverter.SEGMENTED_BY_TRACK ? numSteps / numSegments : numSteps;
        const encodedChordProgression = this.dataConverter.SEGMENTED_BY_TRACK ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat2d"])([
            this.chordEncoder.encode(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NO_CHORD"]).expandDims(0),
            this.chordEncoder.encodeProgression(chordProgression, numChordSteps - 1)
        ], 0) : this.chordEncoder.encodeProgression(chordProgression, numChordSteps);
        return this.dataConverter.SEGMENTED_BY_TRACK ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tile$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tile"])(encodedChordProgression, [
            numSegments,
            1
        ]) : encodedChordProgression;
    }
    async encodeTensors(inputTensors, controlArgs) {
        this.checkControlArgs(controlArgs);
        if (!this.initialized) {
            await this.initialize();
        }
        const segmentLengths = this.dataConverter.endTensor ? await this.getSegmentLengths(inputTensors) : undefined;
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const controlTensor = this.controlArgsToTensor(controlArgs);
            const inputsAndControls = [
                inputTensors
            ];
            if (controlTensor) {
                const tiles = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tile$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tile"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$expand_dims$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["expandDims"])(controlTensor, 0), [
                    inputTensors.shape[0],
                    1,
                    1
                ]);
                inputsAndControls.push(tiles);
            }
            const inputTensorsWithControls = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_3d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat3d"])(inputsAndControls, 2);
            return this.encoder.encode(inputTensorsWithControls, segmentLengths);
        });
    }
    async encode(inputSequences, controlArgs) {
        if (!this.initialized) {
            await this.initialize();
        }
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["performance"].now();
        const inputTensors = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$stack$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["stack"])(inputSequences.map((t)=>this.dataConverter.toTensor(t))));
        const z = await this.encodeTensors(inputTensors, controlArgs);
        inputTensors.dispose();
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Encoding completed', startTime, 'MusicVAE', 20);
        return z;
    }
    async decodeTensors(z, temperature, controlArgs) {
        this.checkControlArgs(controlArgs);
        if (!this.initialized) {
            await this.initialize();
        }
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const controlTensor = this.controlArgsToTensor(controlArgs);
            return this.decoder.decode(z, this.dataConverter.numSteps, undefined, temperature, controlTensor);
        });
    }
    async decode(z, temperature, controlArgs, stepsPerQuarter = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DEFAULT_STEPS_PER_QUARTER"], qpm = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DEFAULT_QUARTERS_PER_MINUTE"]) {
        if (!this.initialized) {
            await this.initialize();
        }
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["performance"].now();
        const tensors = await this.decodeTensors(z, temperature, controlArgs);
        const ohSeqs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(tensors, tensors.shape[0]).map((oh)=>oh.squeeze([
                    0
                ]));
        });
        const outputSequences = [];
        for (const oh of ohSeqs){
            outputSequences.push(await this.dataConverter.toNoteSequence(oh, stepsPerQuarter, qpm));
            oh.dispose();
        }
        tensors.dispose();
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Decoding completed', startTime, 'MusicVAE', 20);
        return outputSequences;
    }
    getInterpolatedZs(z, numInterps) {
        if (typeof numInterps === 'number') {
            numInterps = [
                numInterps
            ];
        }
        if (z.shape[0] !== 2 && z.shape[0] !== 4) {
            throw new Error('Invalid number of input sequences. Requires length 2, or 4');
        }
        if (numInterps.length !== 1 && numInterps.length !== 2) {
            throw new Error('Invalid number of dimensions. Requires length 1, or 2.');
        }
        const w = numInterps[0];
        const h = numInterps.length === 2 ? numInterps[1] : w;
        const interpolatedZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const rangeX = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$linspace$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["linspace"])(0.0, 1.0, w);
            const z0 = z.slice([
                0,
                0
            ], [
                1,
                z.shape[1]
            ]).as1D();
            const z1 = z.slice([
                1,
                0
            ], [
                1,
                z.shape[1]
            ]).as1D();
            if (z.shape[0] === 2) {
                const zDiff = z1.sub(z0);
                return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$outer_product$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["outerProduct"])(rangeX, zDiff).add(z0);
            } else if (z.shape[0] === 4) {
                const rangeY = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$linspace$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["linspace"])(0.0, 1.0, h);
                const z2 = z.slice([
                    2,
                    0
                ], [
                    1,
                    z.shape[1]
                ]).as1D();
                const z3 = z.slice([
                    3,
                    0
                ], [
                    1,
                    z.shape[1]
                ]).as1D();
                const revRangeX = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1.0).sub(rangeX);
                const revRangeY = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1.0).sub(rangeY);
                let finalZs = z0.mul((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$outer_product$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["outerProduct"])(revRangeY, revRangeX).as3D(h, w, 1));
                finalZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$binary_ops$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["addStrict"])(finalZs, z1.mul((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$outer_product$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["outerProduct"])(rangeY, revRangeX).as3D(h, w, 1)));
                finalZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$binary_ops$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["addStrict"])(finalZs, z2.mul((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$outer_product$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["outerProduct"])(revRangeY, rangeX).as3D(h, w, 1)));
                finalZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$binary_ops$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["addStrict"])(finalZs, z3.mul((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$outer_product$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["outerProduct"])(rangeY, rangeX).as3D(h, w, 1)));
                return finalZs.as2D(w * h, z.shape[1]);
            } else {
                throw new Error('Invalid number of note sequences. Requires length 2, or 4');
            }
        });
        return interpolatedZs;
    }
    async sampleTensors(numSamples, temperature = 0.5, controlArgs) {
        this.checkControlArgs(controlArgs);
        if (!this.initialized) {
            await this.initialize();
        }
        const randZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_normal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["randomNormal"])([
                numSamples,
                this.decoder.zDims
            ]));
        const outputTensors = await this.decodeTensors(randZs, temperature, controlArgs);
        randZs.dispose();
        return outputTensors;
    }
    async sample(numSamples, temperature = 0.5, controlArgs, stepsPerQuarter = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DEFAULT_STEPS_PER_QUARTER"], qpm = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DEFAULT_QUARTERS_PER_MINUTE"]) {
        this.checkControlArgs(controlArgs);
        if (!this.initialized) {
            await this.initialize();
        }
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["performance"].now();
        const randZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_normal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["randomNormal"])([
                numSamples,
                this.decoder.zDims
            ]));
        const outputSequences = this.decode(randZs, temperature, controlArgs, stepsPerQuarter, qpm);
        randZs.dispose();
        outputSequences.then(()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Sampling completed', startTime, 'MusicVAE', 20));
        return outputSequences;
    }
    async similarTensors(inputTensor, numSamples, similarity, temperature, controlArgs) {
        if (similarity < 0 || similarity > 1) {
            throw new Error('Similarity must be between 0 and 1.');
        }
        if (!this.initialized) {
            await this.initialize();
        }
        const inputTensors = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$expand_dims$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["expandDims"])(inputTensor, 0);
        const inputZs = await this.encodeTensors(inputTensors, controlArgs);
        inputTensors.dispose();
        const similarZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const randZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_normal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["randomNormal"])([
                numSamples,
                this.decoder.zDims
            ]);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])(inputZs.mul(similarity), randZs.mul(1 - similarity));
        });
        inputZs.dispose();
        const outputTensors = await this.decodeTensors(similarZs, temperature, controlArgs);
        similarZs.dispose();
        return outputTensors;
    }
    async similar(inputSequence, numSamples, similarity, temperature, controlArgs) {
        this.checkControlArgs(controlArgs);
        if (similarity < 0 || similarity > 1) {
            throw new Error('Similarity must be between 0 and 1.');
        }
        if (!this.initialized) {
            await this.initialize();
        }
        const startTime = 0;
        const inputZs = await this.encode([
            inputSequence
        ], controlArgs);
        const similarZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const randZs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$random_normal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["randomNormal"])([
                numSamples,
                this.decoder.zDims
            ]);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])(inputZs.mul(similarity), randZs.mul(1 - similarity));
        });
        inputZs.dispose();
        const outputSequences = this.decode(similarZs, temperature, controlArgs);
        similarZs.dispose();
        outputSequences.then(()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Similar sequence generation completed', startTime, 'MusicVAE', 20));
        return outputSequences;
    }
}
;
 //# sourceMappingURL=model.js.map
}}),
"[project]/node_modules/@magenta/music/esm/music_vae/index.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$midi_me$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/midi_me.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/model.js [app-client] (ecmascript)"); //# sourceMappingURL=index.js.map
;
;
}}),
"[project]/node_modules/@magenta/music/esm/music_vae/index.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$midi_me$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/midi_me.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/music_vae/index.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "Decoder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Decoder"]),
    "Encoder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Encoder"]),
    "MidiMe": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$midi_me$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MidiMe"]),
    "MusicVAE": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MusicVAE"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$midi_me$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/midi_me.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/music_vae/index.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "Decoder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Decoder"]),
    "Encoder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Encoder"]),
    "MidiMe": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MidiMe"]),
    "MusicVAE": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MusicVAE"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/index.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/music_vae.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/index.js [app-client] (ecmascript) <module evaluation>"); //# sourceMappingURL=music_vae.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/music_vae.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/piano_genie/model.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "ChordFamily": (()=>ChordFamily),
    "PianoGenie": (()=>PianoGenie),
    "PianoGenieChord": (()=>PianoGenieChord),
    "PianoGenieKeysig": (()=>PianoGenieKeysig),
    "PianoGenieKeysigChord": (()=>PianoGenieKeysigChord),
    "PianoGenieKeysigChordFamily": (()=>PianoGenieKeysigChordFamily),
    "PitchClass": (()=>PitchClass)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$io$2f$io$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__io$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/io/io.js [app-client] (ecmascript) <export * as io>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/scalar.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$basic_lstm_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/basic_lstm_cell.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/globals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/tensor1d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sub$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/sub.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/mul.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$div$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/div.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$gather$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/gather.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$reshape$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/reshape.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mat_mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/mat_mul.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$expand_dims$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/expand_dims.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/add.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multi_rnn_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/multi_rnn_cell.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$binary_ops$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/binary_ops.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/cast.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/one_hot.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$round$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/round.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$minimum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/minimum.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/concat_1d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/zeros.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$softmax$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/softmax.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multinomial$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/multinomial.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$arg_max$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/arg_max.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/compat/global.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/compat/global.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__logging$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/logging.js [app-client] (ecmascript) <export * as logging>");
;
;
;
const DATA_TIME_QUANTIZE_RATE = 31.25;
const DATA_MAX_DISCRETE_TIMES = 32;
const RNN_NLAYERS = 2;
const RNN_NUNITS = 128;
const NUM_BUTTONS = 8;
const NUM_PIANOKEYS = 88;
function createZeroState() {
    const state = {
        c: [],
        h: []
    };
    for(let i = 0; i < RNN_NLAYERS; ++i){
        state.c.push((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
            1,
            RNN_NUNITS
        ], 'float32'));
        state.h.push((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
            1,
            RNN_NUNITS
        ], 'float32'));
    }
    return state;
}
function disposeState(state) {
    for(let i = 0; i < RNN_NLAYERS; ++i){
        state.c[i].dispose();
        state.h[i].dispose();
    }
}
function sampleLogits(logits, temperature, seed) {
    temperature = temperature !== undefined ? temperature : 1.;
    if (temperature < 0. || temperature > 1.) {
        throw new Error('Invalid temperature specified');
    }
    let result;
    if (temperature === 0) {
        result = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$arg_max$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["argMax"])(logits, 0);
    } else {
        if (temperature < 1) {
            logits = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$div$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["div"])(logits, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(temperature, 'float32'));
        }
        const scores = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$reshape$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["reshape"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$softmax$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["softmax"])(logits, 0), [
            1,
            -1
        ]);
        const sample = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multinomial$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["multinomial"])(scores, 1, seed, true);
        result = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$reshape$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["reshape"])(sample, []);
    }
    return result;
}
class PianoGenieBase {
    constructor(checkpointURL){
        this.checkpointURL = checkpointURL;
        this.initialized = false;
    }
    isInitialized() {
        return this.initialized;
    }
    async initialize(staticVars) {
        if (this.initialized) {
            this.dispose();
        }
        if (this.checkpointURL === undefined && staticVars === undefined) {
            throw new Error('Need to specify either URI or static variables');
        }
        if (staticVars === undefined) {
            const vars = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fetch"])(`${this.checkpointURL}/weights_manifest.json`).then((response)=>response.json()).then((manifest)=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$io$2f$io$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__io$3e$__["io"].loadWeights(manifest, this.checkpointURL));
            this.modelVars = vars;
        } else {
            this.modelVars = staticVars;
        }
        this.decLSTMCells = [];
        this.decForgetBias = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1, 'float32');
        for(let i = 0; i < RNN_NLAYERS; ++i){
            const cellPrefix = `phero_model/decoder/rnn/rnn/multi_rnn_cell/cell_${i}/lstm_cell/`;
            this.decLSTMCells.push((data, c, h)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$basic_lstm_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["basicLSTMCell"])(this.decForgetBias, this.modelVars[cellPrefix + 'kernel'], this.modelVars[cellPrefix + 'bias'], data, c, h));
        }
        this.resetState();
        this.initialized = true;
        this.next(0);
        this.resetState();
    }
    getRnnInputFeats() {
        const feats = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const buttonTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor1d"])([
                this.button
            ], 'float32');
            const buttonScaled = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sub$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sub"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mul"])(2., (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$div$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["div"])(buttonTensor, NUM_BUTTONS - 1)), 1);
            return buttonScaled.as1D();
        });
        return feats;
    }
    next(button, temperature, seed) {
        const sampleFunc = (logits)=>{
            return sampleLogits(logits, temperature, seed);
        };
        return this.nextWithCustomSamplingFunction(button, sampleFunc);
    }
    nextFromKeyList(button, keyList, temperature, seed) {
        const sampleFunc = (logits)=>{
            const keySubsetTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor1d"])(keyList, 'int32');
            logits = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$gather$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["gather"])(logits, keySubsetTensor);
            let result = sampleLogits(logits, temperature, seed);
            const result1d = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$gather$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["gather"])(keySubsetTensor, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$reshape$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["reshape"])(result, [
                1
            ]));
            result = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$reshape$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["reshape"])(result1d, []);
            return result;
        };
        return this.nextWithCustomSamplingFunction(button, sampleFunc);
    }
    nextFromKeyWhitelist(button, keyList, temperature, seed) {
        __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__logging$3e$__["logging"].log('nextFromKeyWhitelist() is deprecated, and will be removed in a future \
         version. Please use nextFromKeyList() instead', 'PianoGenie', 5);
        return this.nextFromKeyList(button, keyList, temperature, seed);
    }
    nextWithCustomSamplingFunction(button, sampleFunc) {
        const lastState = this.lastState;
        this.button = button;
        const rnnInput = this.getRnnInputFeats();
        const [state, output] = this.evaluateModelAndSample(rnnInput, lastState, sampleFunc);
        rnnInput.dispose();
        disposeState(this.lastState);
        this.lastState = state;
        return output;
    }
    evaluateModelAndSample(rnnInput1d, initialState, sampleFunc) {
        if (!this.initialized) {
            throw new Error('Model is not initialized.');
        }
        const [finalState, output] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            let rnnInput = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mat_mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["matMul"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$expand_dims$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["expandDims"])(rnnInput1d, 0), this.modelVars['phero_model/decoder/rnn_input/dense/kernel']);
            rnnInput = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])(rnnInput, this.modelVars['phero_model/decoder/rnn_input/dense/bias']);
            const [c, h] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$multi_rnn_cell$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["multiRNNCell"])(this.decLSTMCells, rnnInput, initialState.c, initialState.h);
            const finalState = {
                c,
                h
            };
            let logits = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mat_mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["matMul"])(h[RNN_NLAYERS - 1], this.modelVars['phero_model/decoder/pitches/dense/kernel']);
            logits = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])(logits, this.modelVars['phero_model/decoder/pitches/dense/bias']);
            const logits1D = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$reshape$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["reshape"])(logits, [
                NUM_PIANOKEYS
            ]);
            const sample = sampleFunc(logits1D);
            const output = sample.dataSync()[0];
            return [
                finalState,
                output
            ];
        });
        return [
            finalState,
            output
        ];
    }
    resetState() {
        if (this.lastState !== undefined) {
            disposeState(this.lastState);
        }
        this.lastState = createZeroState();
    }
    dispose() {
        if (!this.initialized) {
            return;
        }
        Object.keys(this.modelVars).forEach((name)=>this.modelVars[name].dispose());
        this.decForgetBias.dispose();
        disposeState(this.lastState);
        this.initialized = false;
    }
}
class PianoGenieAutoregressiveDeltaTime extends PianoGenieBase {
    getRnnInputFeats() {
        const feats = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const featsArr = [
                super.getRnnInputFeats()
            ];
            const lastOutput = this.lastOutput;
            const lastTime = this.lastTime;
            const time = this.time;
            let deltaTime;
            if (this.deltaTimeOverride === undefined) {
                deltaTime = (time.getTime() - lastTime.getTime()) / 1000;
            } else {
                deltaTime = this.deltaTimeOverride;
                this.deltaTimeOverride = undefined;
            }
            const lastOutputTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(lastOutput, 'int32');
            const lastOutputInc = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$binary_ops$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["addStrict"])(lastOutputTensor, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1, 'int32'));
            const lastOutputOh = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cast"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["oneHot"])(lastOutputInc, NUM_PIANOKEYS + 1), 'float32');
            featsArr.push(lastOutputOh);
            const deltaTimeTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(deltaTime, 'float32');
            const deltaTimeBin = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$round$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["round"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mul"])(deltaTimeTensor, DATA_TIME_QUANTIZE_RATE));
            const deltaTimeTrunc = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$minimum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["minimum"])(deltaTimeBin, DATA_MAX_DISCRETE_TIMES);
            const deltaTimeInt = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cast"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])(deltaTimeTrunc, 1e-4), 'int32');
            const deltaTimeOh = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["oneHot"])(deltaTimeInt, DATA_MAX_DISCRETE_TIMES + 1);
            const deltaTimeOhFloat = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cast"])(deltaTimeOh, 'float32');
            featsArr.push(deltaTimeOhFloat);
            this.lastTime = time;
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat1d"])(featsArr);
        });
        return feats;
    }
    nextWithCustomSamplingFunction(button, sampleFunc) {
        this.time = new Date();
        const output = super.nextWithCustomSamplingFunction(button, sampleFunc);
        this.lastOutput = output;
        this.lastTime = this.time;
        return output;
    }
    overrideLastOutput(lastOutput) {
        this.lastOutput = lastOutput;
    }
    overrideDeltaTime(deltaTime) {
        this.deltaTimeOverride = deltaTime;
    }
    resetState() {
        super.resetState();
        this.lastOutput = -1;
        this.lastTime = new Date();
        this.lastTime.setSeconds(this.lastTime.getSeconds() - 100000);
        this.time = new Date();
    }
}
var PitchClass;
(function(PitchClass) {
    PitchClass[PitchClass["None"] = 0] = "None";
    PitchClass[PitchClass["C"] = 1] = "C";
    PitchClass[PitchClass["Cs"] = 2] = "Cs";
    PitchClass[PitchClass["D"] = 3] = "D";
    PitchClass[PitchClass["Eb"] = 4] = "Eb";
    PitchClass[PitchClass["E"] = 5] = "E";
    PitchClass[PitchClass["F"] = 6] = "F";
    PitchClass[PitchClass["Fs"] = 7] = "Fs";
    PitchClass[PitchClass["G"] = 8] = "G";
    PitchClass[PitchClass["Ab"] = 9] = "Ab";
    PitchClass[PitchClass["A"] = 10] = "A";
    PitchClass[PitchClass["Bb"] = 11] = "Bb";
    PitchClass[PitchClass["B"] = 12] = "B";
})(PitchClass || (PitchClass = {}));
var ChordFamily;
(function(ChordFamily) {
    ChordFamily[ChordFamily["None"] = 0] = "None";
    ChordFamily[ChordFamily["Maj"] = 1] = "Maj";
    ChordFamily[ChordFamily["Min"] = 2] = "Min";
    ChordFamily[ChordFamily["Aug"] = 3] = "Aug";
    ChordFamily[ChordFamily["Dim"] = 4] = "Dim";
    ChordFamily[ChordFamily["Seven"] = 5] = "Seven";
    ChordFamily[ChordFamily["Maj7"] = 6] = "Maj7";
    ChordFamily[ChordFamily["Min7"] = 7] = "Min7";
    ChordFamily[ChordFamily["Min7b5"] = 8] = "Min7b5";
})(ChordFamily || (ChordFamily = {}));
class PianoGenieAutoregressiveDeltaTimeChord extends PianoGenieAutoregressiveDeltaTime {
    getRnnInputFeats() {
        const feats = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const feats1d = super.getRnnInputFeats();
            const featsArr = [
                feats1d
            ];
            const chordRootTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(this.chordRoot, 'int32');
            const chordRootTensorSubOne = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$binary_ops$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["subStrict"])(chordRootTensor, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1, 'int32'));
            const chordRootTensorOh = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cast"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["oneHot"])(chordRootTensorSubOne, 12), 'float32');
            featsArr.push(chordRootTensorOh);
            const chordFamilyTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(this.chordFamily, 'int32');
            const chordFamilyTensorSubOne = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$binary_ops$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["subStrict"])(chordFamilyTensor, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1, 'int32'));
            const chordFamilyTensorOh = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cast"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["oneHot"])(chordFamilyTensorSubOne, 8), 'float32');
            featsArr.push(chordFamilyTensorOh);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat1d"])(featsArr);
        });
        return feats;
    }
    setChordRoot(chordRoot) {
        this.chordRoot = chordRoot;
    }
    setChordFamily(chordFamily) {
        this.chordFamily = chordFamily;
    }
    resetState() {
        super.resetState();
        this.chordRoot = PitchClass.None;
        this.chordFamily = ChordFamily.None;
    }
}
class PianoGenieAutoregressiveDeltaTimeKeysig extends PianoGenieAutoregressiveDeltaTime {
    getRnnInputFeats() {
        const feats = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const feats1d = super.getRnnInputFeats();
            const featsArr = [
                feats1d
            ];
            const keySigTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(this.keySignature, 'int32');
            const keySigTensorSubOne = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$binary_ops$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["subStrict"])(keySigTensor, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1, 'int32'));
            const keySigTensorOh = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cast"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["oneHot"])(keySigTensorSubOne, 12), 'float32');
            featsArr.push(keySigTensorOh);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat1d"])(featsArr);
        });
        return feats;
    }
    setKeySignature(keySignature) {
        this.keySignature = keySignature;
    }
    resetState() {
        super.resetState();
        this.keySignature = PitchClass.None;
    }
}
class PianoGenieAutoregressiveDeltaTimeKeysigChord extends PianoGenieAutoregressiveDeltaTimeKeysig {
    getRnnInputFeats() {
        const feats = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const feats1d = super.getRnnInputFeats();
            const featsArr = [
                feats1d
            ];
            const chordRootTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(this.chordRoot, 'int32');
            const chordRootTensorSubOne = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$binary_ops$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["subStrict"])(chordRootTensor, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1, 'int32'));
            const chordRootTensorOh = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cast"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["oneHot"])(chordRootTensorSubOne, 12), 'float32');
            featsArr.push(chordRootTensorOh);
            const chordFamilyTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(this.chordFamily, 'int32');
            const chordFamilyTensorSubOne = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$binary_ops$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["subStrict"])(chordFamilyTensor, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1, 'int32'));
            const chordFamilyTensorOh = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cast"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["oneHot"])(chordFamilyTensorSubOne, 8), 'float32');
            featsArr.push(chordFamilyTensorOh);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat1d"])(featsArr);
        });
        return feats;
    }
    setChordRoot(chordRoot) {
        this.chordRoot = chordRoot;
    }
    setChordFamily(chordFamily) {
        this.chordFamily = chordFamily;
    }
    resetState() {
        super.resetState();
        this.chordRoot = PitchClass.None;
        this.chordFamily = ChordFamily.None;
    }
}
class PianoGenieAutoregressiveDeltaTimeKeysigChordFamily extends PianoGenieAutoregressiveDeltaTimeKeysig {
    getRnnInputFeats() {
        const feats = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const feats1d = super.getRnnInputFeats();
            const featsArr = [
                feats1d
            ];
            const chordFamilyTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(this.chordFamily, 'int32');
            const chordFamilyTensorSubOne = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$binary_ops$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["subStrict"])(chordFamilyTensor, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(1, 'int32'));
            const chordFamilyTensorOh = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$cast$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["cast"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$one_hot$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["oneHot"])(chordFamilyTensorSubOne, 8), 'float32');
            featsArr.push(chordFamilyTensorOh);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat1d"])(featsArr);
        });
        return feats;
    }
    setChordFamily(chordFamily) {
        this.chordFamily = chordFamily;
    }
    resetState() {
        super.resetState();
        this.chordFamily = ChordFamily.None;
    }
}
class PianoGenie extends PianoGenieAutoregressiveDeltaTime {
}
class PianoGenieChord extends PianoGenieAutoregressiveDeltaTimeChord {
}
class PianoGenieKeysig extends PianoGenieAutoregressiveDeltaTimeKeysig {
}
class PianoGenieKeysigChord extends PianoGenieAutoregressiveDeltaTimeKeysigChord {
}
class PianoGenieKeysigChordFamily extends PianoGenieAutoregressiveDeltaTimeKeysigChordFamily {
}
;
 //# sourceMappingURL=model.js.map
}}),
"[project]/node_modules/@magenta/music/esm/piano_genie/index.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie/model.js [app-client] (ecmascript)"); //# sourceMappingURL=index.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/piano_genie/index.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/piano_genie/index.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "PianoGenie": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenie"]),
    "PianoGenieChord": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenieChord"]),
    "PianoGenieKeysig": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenieKeysig"]),
    "PianoGenieKeysigChord": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenieKeysigChord"]),
    "PianoGenieKeysigChordFamily": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenieKeysigChordFamily"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/piano_genie/index.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "PianoGenie": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenie"]),
    "PianoGenieChord": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenieChord"]),
    "PianoGenieKeysig": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenieKeysig"]),
    "PianoGenieKeysigChord": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenieKeysigChord"]),
    "PianoGenieKeysigChordFamily": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenieKeysigChordFamily"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie/index.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/piano_genie.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie/index.js [app-client] (ecmascript) <module evaluation>"); //# sourceMappingURL=piano_genie.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/piano_genie.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/protobuf.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/protobuf/index.js [app-client] (ecmascript)"); //# sourceMappingURL=protobuf.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/protobuf.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/protobuf/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/protobuf.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/transcription/constants.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "FRAME_LENGTH_SECONDS": (()=>FRAME_LENGTH_SECONDS),
    "MAX_MIDI_PITCH": (()=>MAX_MIDI_PITCH),
    "MEL_SPEC_BINS": (()=>MEL_SPEC_BINS),
    "MIDI_PITCHES": (()=>MIDI_PITCHES),
    "MIN_MIDI_PITCH": (()=>MIN_MIDI_PITCH),
    "SAMPLE_RATE": (()=>SAMPLE_RATE),
    "SPEC_HOP_LENGTH": (()=>SPEC_HOP_LENGTH)
});
const SAMPLE_RATE = 16000;
const SPEC_HOP_LENGTH = 512;
const FRAME_LENGTH_SECONDS = SPEC_HOP_LENGTH / SAMPLE_RATE;
const MEL_SPEC_BINS = 229;
const MIN_MIDI_PITCH = 21;
const MAX_MIDI_PITCH = 108;
const MIDI_PITCHES = MAX_MIDI_PITCH - MIN_MIDI_PITCH + 1; //# sourceMappingURL=constants.js.map
}}),
"[project]/node_modules/@magenta/music/esm/transcription/audio_utils.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "preprocessAudio": (()=>preprocessAudio)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/audio_utils.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/constants.js [app-client] (ecmascript)");
;
;
async function preprocessAudio(audioBuffer) {
    const resampledMonoAudio = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["resampleAndMakeMono"])(audioBuffer);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["powerToDb"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["melSpectrogram"])(resampledMonoAudio, {
        sampleRate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SAMPLE_RATE"],
        hopLength: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SPEC_HOP_LENGTH"],
        nMels: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MEL_SPEC_BINS"],
        nFft: 2048,
        fMin: 30
    }));
} //# sourceMappingURL=audio_utils.js.map
}}),
"[project]/node_modules/@magenta/music/esm/transcription/transcription_utils.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "batchInput": (()=>batchInput),
    "pianorollToNoteSequence": (()=>pianorollToNoteSequence),
    "unbatchOutput": (()=>unbatchOutput)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/tensor2d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$slice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/slice.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/concat.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/globals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$greater$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/greater.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$logical_or$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/logical_or.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/protobuf/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/constants.js [app-client] (ecmascript)");
;
;
;
const RF_PAD = 3;
function batchInput(input, batchLength) {
    let batchSize = Math.ceil(input.length / batchLength);
    let batchRemainder = input.length % batchLength;
    let mergedRemainder = 0;
    if (batchSize > 1 && batchRemainder > 0 && batchRemainder <= RF_PAD) {
        batchSize -= 1;
        mergedRemainder = batchRemainder;
        batchRemainder = 0;
    }
    if (batchSize === 1) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor2d"])(input).expandDims(0);
    }
    const actualBatchLength = batchLength + 2 * RF_PAD;
    const firstBatch = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor2d"])(input.slice(0, actualBatchLength)).expandDims(0);
    const lastBatch = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor2d"])(input.slice(input.length - actualBatchLength)).expandDims(0);
    if (batchSize === 2) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])([
            firstBatch,
            lastBatch
        ], 0);
    }
    let naivePaddedBatches;
    if (batchRemainder) {
        naivePaddedBatches = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor2d"])(input).pad([
            [
                0,
                batchLength - batchRemainder
            ],
            [
                0,
                0
            ]
        ]).as3D(batchSize, batchLength, -1);
    } else {
        naivePaddedBatches = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor2d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor2d"])(input.slice(0, input.length - mergedRemainder)).as3D(batchSize, batchLength, -1);
    }
    const leftPad = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$slice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["slice"])(naivePaddedBatches, [
        0,
        batchLength - RF_PAD
    ], [
        batchSize - 2,
        -1
    ]);
    const rightPad = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$slice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["slice"])(naivePaddedBatches, [
        2,
        0
    ], [
        -1,
        RF_PAD
    ]);
    const midBatches = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])([
        leftPad,
        naivePaddedBatches.slice(1, batchSize - 2),
        rightPad
    ], 1);
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])([
        firstBatch,
        midBatches,
        lastBatch
    ], 0);
}
function unbatchOutput(batches, batchLength, totalLength) {
    if (batches.shape[0] === 1) {
        return batches;
    }
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
        const firstBatch = batches.slice([
            0,
            0
        ], [
            1,
            batchLength
        ]);
        let finalBatchLength = totalLength % batchLength;
        if (finalBatchLength <= RF_PAD) {
            finalBatchLength += batchLength;
        }
        const finalBatch = batches.slice([
            batches.shape[0] - 1,
            batches.shape[1] - finalBatchLength
        ], [
            -1,
            -1
        ]);
        let toConcat = [
            firstBatch,
            finalBatch
        ];
        if (batches.shape[0] > 2) {
            const midBatchSize = batches.shape[0] - 2;
            const midBatches = batches.slice([
                1,
                RF_PAD
            ], [
                midBatchSize,
                batchLength
            ]);
            toConcat = [
                firstBatch,
                midBatches.as3D(1, midBatchSize * batchLength, -1),
                finalBatch
            ];
        }
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])(toConcat, 1);
    });
}
async function pianorollToNoteSequence(frameProbs, onsetProbs, velocityValues, onsetThreshold = 0.5, frameThreshold = 0.5) {
    const ns = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NoteSequence"].create();
    const pitchStartStepPlusOne = new Uint32Array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIDI_PITCHES"]);
    const onsetVelocities = new Uint8Array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIDI_PITCHES"]);
    let previousOnsets = new Uint8Array(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIDI_PITCHES"]);
    function endPitch(pitch, endFrame) {
        ns.notes.push(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NoteSequence"].Note.create({
            pitch: pitch + __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIN_MIDI_PITCH"],
            startTime: (pitchStartStepPlusOne[pitch] - 1) * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["FRAME_LENGTH_SECONDS"],
            endTime: endFrame * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["FRAME_LENGTH_SECONDS"],
            velocity: onsetVelocities[pitch]
        }));
        pitchStartStepPlusOne[pitch] = 0;
    }
    function processOnset(p, f, velocity) {
        if (pitchStartStepPlusOne[p]) {
            if (!previousOnsets[p]) {
                endPitch(p, f);
                pitchStartStepPlusOne[p] = f + 1;
                onsetVelocities[p] = velocity;
            }
        } else {
            pitchStartStepPlusOne[p] = f + 1;
            onsetVelocities[p] = velocity;
        }
    }
    const predictions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
        let onsetPredictions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$greater$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["greater"])(onsetProbs, onsetThreshold);
        let framePredictions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$greater$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["greater"])(frameProbs, frameThreshold);
        onsetPredictions = onsetPredictions.pad([
            [
                0,
                1
            ],
            [
                0,
                0
            ]
        ]);
        framePredictions = framePredictions.pad([
            [
                0,
                1
            ],
            [
                0,
                0
            ]
        ]);
        velocityValues = velocityValues.pad([
            [
                0,
                1
            ],
            [
                0,
                0
            ]
        ]);
        framePredictions = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$logical_or$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logicalOr"])(framePredictions, onsetPredictions);
        return [
            framePredictions,
            onsetPredictions,
            velocityValues
        ];
    });
    const [frames, onsets, velocities] = await Promise.all(predictions.map((t)=>t.data()));
    predictions.forEach((t)=>t.dispose());
    const numFrames = frameProbs.shape[0];
    for(let f = 0; f < numFrames + 1; ++f){
        for(let p = 0; p < __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIDI_PITCHES"]; ++p){
            const i = f * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIDI_PITCHES"] + p;
            if (onsets[i]) {
                processOnset(p, f, velocities[i]);
            } else if (!frames[i] && pitchStartStepPlusOne[p]) {
                endPitch(p, f);
            }
        }
        previousOnsets = onsets.slice(f * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIDI_PITCHES"], (f + 1) * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIDI_PITCHES"]);
    }
    ns.totalTime = numFrames * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["FRAME_LENGTH_SECONDS"];
    return ns;
} //# sourceMappingURL=transcription_utils.js.map
}}),
"[project]/node_modules/@magenta/music/esm/transcription/model.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "OnsetsAndFrames": (()=>OnsetsAndFrames)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$io$2f$io$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__io$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/io/io.js [app-client] (ecmascript) <export * as io>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/globals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_3d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/concat_3d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$clip_by_value$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/clip_by_value.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/scalar.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-layers/dist/exports.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-layers/dist/exports_layers.js [app-client] (ecmascript) <export * as layers>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/split.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/concat.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/zeros.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/audio_utils.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/logging.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/compat/global.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/compat/global.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/audio_utils.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/constants.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$transcription_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/transcription_utils.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
class OnsetsAndFrames {
    constructor(checkpointURL, chunkLength = 250){
        this.checkpointURL = checkpointURL;
        this.chunkLength = chunkLength;
    }
    async initialize() {
        this.dispose();
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["performance"].now();
        const vars = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["fetch"])(`${this.checkpointURL}/weights_manifest.json`).then((response)=>response.json()).then((manifest)=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$io$2f$io$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__io$3e$__["io"].loadWeights(manifest, this.checkpointURL));
        this.build(vars);
        Object.keys(vars).map((name)=>vars[name].dispose());
        this.initialized = true;
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Initialized model', startTime, 'O&F');
    }
    dispose() {
        if (!this.initialized) {
            return;
        }
        this.onsetsCnn.dispose();
        this.onsetsRnn.dispose();
        this.activationCnn.dispose();
        this.frameRnn.dispose();
        this.velocityCnn.dispose();
        this.initialized = false;
    }
    isInitialized() {
        return this.initialized;
    }
    async transcribeFromMelSpec(melSpec, parallelBatches = 4) {
        if (!this.isInitialized()) {
            this.initialize();
        }
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["performance"].now();
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["log"])('Computing onsets, frames, and velocities...', 'O&F', 20);
        const [frameProbs, onsetProbs, velocities] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const batches = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$transcription_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["batchInput"])(melSpec, this.chunkLength);
            return this.processBatches(batches, this.chunkLength, melSpec.length, parallelBatches);
        });
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["log"])('Converting to NoteSequence...', 'O&F', 20);
        const ns = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$transcription_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pianorollToNoteSequence"])(frameProbs, onsetProbs, velocities);
        ns.then(()=>{
            frameProbs.dispose();
            onsetProbs.dispose();
            velocities.dispose();
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Transcribed from mel spec', startTime, 'O&F');
        });
        return ns;
    }
    async transcribeFromAudioBuffer(audioBuffer, batchSize = 4) {
        const startTime = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$compat$2f$global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__["performance"].now();
        const melSpec = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["preprocessAudio"])(audioBuffer);
        melSpec.then(()=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$logging$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logWithDuration"])('Converted audio to mel spec', startTime, 'O&F', 20));
        return melSpec.then((spec)=>this.transcribeFromMelSpec(spec.map((a)=>Array.from(a), batchSize)));
    }
    async transcribeFromAudioFile(blob) {
        const audio = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["loadAudioFromFile"])(blob);
        return this.transcribeFromAudioBuffer(audio);
    }
    async transcribeFromAudioURL(url) {
        const audio = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["loadAudioFromUrl"])(url);
        return this.transcribeFromAudioBuffer(audio);
    }
    processBatches(batches, chunkLength, fullLength, batchSize) {
        const runCnns = (batch)=>[
                this.onsetsCnn.predict(batch, batchSize),
                this.activationCnn.predict(batch, batchSize),
                this.velocityCnn.predict(batch, batchSize)
            ];
        let onsetsCnnOut, activationProbs, scaledVelocities;
        if (batches.shape[0] === 1) {
            [onsetsCnnOut, activationProbs, scaledVelocities] = runCnns(batches.expandDims(-1));
        } else {
            const batchesOutput = runCnns(batches.expandDims(-1));
            const allOutputs = [];
            for(let i = 0; i < 3; ++i){
                allOutputs.push((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$transcription_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["unbatchOutput"])(batchesOutput[i], chunkLength, fullLength));
            }
            [onsetsCnnOut, activationProbs, scaledVelocities] = allOutputs;
        }
        const onsetProbs = this.onsetsRnn.predict(onsetsCnnOut, this.chunkLength);
        onsetsCnnOut.dispose();
        const frameProbInputs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_3d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat3d"])([
            onsetProbs,
            activationProbs
        ], -1);
        activationProbs.dispose();
        const frameProbs = this.frameRnn.predict(frameProbInputs, this.chunkLength);
        const velocities = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$clip_by_value$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["clipByValue"])(scaledVelocities, 0., 1.).mul((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(80.)).add((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(10.)).toInt();
        scaledVelocities.dispose();
        return [
            frameProbs.squeeze(),
            onsetProbs.squeeze(),
            velocities.squeeze()
        ];
    }
    build(vars) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            this.onsetsCnn = new AcousticCnn();
            this.onsetsCnn.setWeights(vars, 'onsets');
            this.onsetsRnn = new Lstm([
                null,
                this.onsetsCnn.outputShape[2]
            ]);
            this.onsetsRnn.setWeights(vars, 'onsets', 'onset_probs');
            this.activationCnn = new AcousticCnn('sigmoid');
            this.activationCnn.setWeights(vars, 'frame', 'activation_probs');
            this.frameRnn = new Lstm([
                null,
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIDI_PITCHES"] * 2
            ]);
            this.frameRnn.setWeights(vars, 'frame', 'frame_probs');
            this.velocityCnn = new AcousticCnn('linear');
            this.velocityCnn.setWeights(vars, 'velocity', 'onset_velocities');
        });
    }
}
class AcousticCnn {
    constructor(finalDenseActivation){
        this.nn = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sequential"])();
        const convConfig = {
            filters: 48,
            kernelSize: [
                3,
                3
            ],
            activation: 'linear',
            useBias: false,
            padding: 'same',
            dilationRate: [
                1,
                1
            ],
            inputShape: [
                null,
                __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MEL_SPEC_BINS"],
                1
            ],
            trainable: false
        };
        const batchNormConfig = {
            scale: false,
            trainable: false
        };
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].conv2d(convConfig));
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].batchNormalization(batchNormConfig));
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].activation({
            activation: 'relu'
        }));
        convConfig.inputShape = null;
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].conv2d(convConfig));
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].batchNormalization(batchNormConfig));
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].activation({
            activation: 'relu'
        }));
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].maxPooling2d({
            poolSize: [
                1,
                2
            ],
            strides: [
                1,
                2
            ]
        }));
        convConfig.filters = 96;
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].conv2d(convConfig));
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].batchNormalization(batchNormConfig));
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].activation({
            activation: 'relu'
        }));
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].maxPooling2d({
            poolSize: [
                1,
                2
            ],
            strides: [
                1,
                2
            ]
        }));
        const dims = this.nn.outputShape;
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].reshape({
            targetShape: [
                dims[1],
                dims[2] * dims[3]
            ]
        }));
        this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].dense({
            units: 768,
            activation: 'relu',
            trainable: false
        }));
        if (finalDenseActivation) {
            this.nn.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].dense({
                units: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIDI_PITCHES"],
                activation: finalDenseActivation,
                trainable: false
            }));
        }
        this.outputShape = this.nn.outputShape;
    }
    dispose() {
        this.nn.dispose();
    }
    predict(inputs, batchSize) {
        return this.nn.predict(inputs, {
            batchSize
        });
    }
    setWeights(vars, scope, denseName) {
        function getVar(name) {
            const v = vars[name];
            if (v === undefined) {
                throw Error(`Variable not found: ${name}`);
            }
            return v;
        }
        let weights = [
            getVar(`${scope}/conv0/weights`),
            getVar(`${scope}/conv0/BatchNorm/beta`),
            getVar(`${scope}/conv0/BatchNorm/moving_mean`),
            getVar(`${scope}/conv0/BatchNorm/moving_variance`),
            getVar(`${scope}/conv1/weights`),
            getVar(`${scope}/conv1/BatchNorm/beta`),
            getVar(`${scope}/conv1/BatchNorm/moving_mean`),
            getVar(`${scope}/conv1/BatchNorm/moving_variance`),
            getVar(`${scope}/conv2/weights`),
            getVar(`${scope}/conv2/BatchNorm/beta`),
            getVar(`${scope}/conv2/BatchNorm/moving_mean`),
            getVar(`${scope}/conv2/BatchNorm/moving_variance`),
            getVar(`${scope}/fc_end/weights`),
            getVar(`${scope}/fc_end/biases`)
        ];
        if (denseName) {
            weights = weights.concat([
                getVar(`${scope}/${denseName}/weights`),
                getVar(`${scope}/${denseName}/biases`)
            ]);
        }
        this.nn.setWeights(weights);
    }
}
class Lstm {
    constructor(inputShape, units = 384){
        this.dense = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sequential"])();
        this.units = units;
        function getLstm() {
            const lstm = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].lstm({
                inputShape,
                units,
                returnSequences: true,
                recurrentActivation: 'sigmoid',
                returnState: true,
                kernelInitializer: 'zeros',
                recurrentInitializer: 'zeros',
                biasInitializer: 'zeros',
                trainable: false
            });
            const inputs = [
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["input"])({
                    shape: inputShape
                }),
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["input"])({
                    shape: [
                        units
                    ]
                }),
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["input"])({
                    shape: [
                        units
                    ]
                })
            ];
            const outputs = lstm.apply(inputs);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["model"])({
                inputs,
                outputs
            });
        }
        this.lstm = getLstm();
        this.dense.add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$layers$2f$dist$2f$exports_layers$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__layers$3e$__["layers"].dense({
            inputShape: [
                null,
                units
            ],
            units: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIDI_PITCHES"],
            activation: 'sigmoid',
            trainable: false
        }));
    }
    dispose() {
        this.lstm.dispose();
        this.dense.dispose();
    }
    setWeights(vars, scope, denseName) {
        function getVar(name) {
            const v = vars[name];
            if (v === undefined) {
                throw Error(`Variable not found: ${name}`);
            }
            return v;
        }
        const reorderGates = (weights, forgetBias = 0)=>{
            const [i, c, f, o] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(weights, 4, -1);
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])([
                i,
                f.add((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$scalar$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["scalar"])(forgetBias)),
                c,
                o
            ], -1);
        };
        const splitAndReorderKernel = (kernel)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(reorderGates(kernel), [
                kernel.shape[0] - this.units,
                this.units
            ]);
        const LSTM_PREFIX = 'cudnn_lstm/rnn/multi_rnn_cell/cell_0/cudnn_compatible_lstm_cell';
        const setLstmWeights = (lstm)=>lstm.setWeights(splitAndReorderKernel(getVar(`${scope}/${LSTM_PREFIX}/kernel`)).concat(reorderGates(getVar(`${scope}/${LSTM_PREFIX}/bias`), 1.0)));
        setLstmWeights(this.lstm);
        this.dense.setWeights([
            getVar(`${scope}/${denseName}/weights`),
            getVar(`${scope}/${denseName}/biases`)
        ]);
    }
    predict(inputs, chunkSize) {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>this.predictImpl(inputs, chunkSize));
    }
    predictImpl(inputs, chunkSize) {
        const fullLength = inputs.shape[1];
        const numChunks = Math.ceil(fullLength / chunkSize);
        let state = [
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
                1,
                this.units
            ]),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$zeros$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["zeros"])([
                1,
                this.units
            ])
        ];
        const outputChunks = [];
        for(let i = 0; i < numChunks; ++i){
            const chunk = inputs.slice([
                0,
                i * chunkSize
            ], [
                -1,
                i < numChunks - 1 ? chunkSize : -1
            ]);
            const result = this.lstm.predict([
                chunk,
                state[0],
                state[1]
            ]);
            outputChunks.push(this.dense.predict(result[0]));
            state = result.slice(1);
        }
        return outputChunks.length === 1 ? outputChunks[0] : (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat_3d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat3d"])(outputChunks, 1);
    }
}
;
 //# sourceMappingURL=model.js.map
}}),
"[project]/node_modules/@magenta/music/esm/transcription/index.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/model.js [app-client] (ecmascript)"); //# sourceMappingURL=index.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/transcription/index.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/transcription/index.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "OnsetsAndFrames": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["OnsetsAndFrames"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/transcription/index.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "OnsetsAndFrames": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["OnsetsAndFrames"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/index.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/transcription.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/index.js [app-client] (ecmascript) <module evaluation>"); //# sourceMappingURL=transcription.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/transcription.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/gansynth.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/gansynth/index.js [app-client] (ecmascript) <module evaluation>"); //# sourceMappingURL=gansynth.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/gansynth.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/gansynth/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/gansynth.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/spice/loudness_utils.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "computePower": (()=>computePower)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/tensor1d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$conv1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/conv1d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$ones$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/ones.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/mul.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$log$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/log.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$maximum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/maximum.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/spice.js [app-client] (ecmascript)");
;
;
async function computePower(audioChannelData) {
    const frameSize = 1024;
    const refDb = 20.7;
    const ldRange = 120.0;
    const hopSize = Math.floor(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MODEL_SAMPLE_RATE"] / __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MODEL_FRAME_RATE"]);
    const audioTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor1d"])(audioChannelData, 'float32');
    const newSamplesCount = audioChannelData.length;
    if (audioTensor === null) {
        return [];
    }
    const sq = audioTensor.mul(audioTensor).reshape([
        newSamplesCount,
        1
    ]);
    const rmsEnergy = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$conv1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["conv1d"])(sq, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$ones$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ones"])([
        frameSize,
        1,
        1
    ]).div(frameSize), hopSize, 'same').sqrt().squeeze();
    const amin = 1e-20;
    const powerDb = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mul"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$log$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["log"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$maximum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["maximum"])(amin, rmsEnergy)).div((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$log$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["log"])(10)), 20);
    const powerDbShifted = powerDb.sub(refDb);
    const powerDbClipped = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$maximum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["maximum"])(powerDbShifted, -ldRange);
    const output = await powerDbClipped.array();
    audioTensor.dispose();
    sq.dispose();
    rmsEnergy.dispose();
    powerDb.dispose();
    powerDbShifted.dispose();
    powerDbClipped.dispose();
    return output;
}
;
 //# sourceMappingURL=loudness_utils.js.map
}}),
"[project]/node_modules/@magenta/music/esm/spice/pitch_utils.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "getPitches": (()=>getPitches),
    "shiftF0": (()=>shiftF0),
    "upsample_f0": (()=>upsample_f0),
    "upsample_linear": (()=>upsample_linear)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/globals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/mul.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$pow$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/pow.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/tensor.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$truncated_normal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/truncated_normal.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/audio_utils.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/spice.js [app-client] (ecmascript)");
;
;
;
function shiftF0(f0Hz, f0OctaveShift = 0.0) {
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
        let tempF0 = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$mul$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mul"])(f0Hz, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$pow$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pow"])(2, f0OctaveShift));
        tempF0 = tempF0.clipByValue(0.0, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["midiToHz"])(110.0).dataSync()[0]);
        return tempF0;
    });
}
function upsample_linear(buffer, newSampleRateLength) {
    const pitchedInput = [];
    const dupCountPitches = Math.floor(newSampleRateLength / buffer.length);
    const modulos = newSampleRateLength % buffer.length;
    for(let i = 0; i < buffer.length; i++){
        pitchedInput.push(buffer[i]);
        for(let j = 1; j < dupCountPitches; j++){
            pitchedInput.push(-1);
        }
        if (i < modulos) {
            pitchedInput.push(-1);
        }
    }
    let lastPitch = -1;
    for(let i = 0; i < pitchedInput.length; i++){
        if (pitchedInput[i] !== -1) {
            let dif = pitchedInput[i];
            const lastValue = lastPitch >= 0 ? pitchedInput[lastPitch] : 0;
            if (lastPitch !== -1) {
                dif -= pitchedInput[lastPitch];
            }
            for(let j = lastPitch + 1; j < i; j++){
                pitchedInput[j] = lastValue + dif * (j - lastPitch) / (i - lastPitch);
            }
            lastPitch = i;
        }
    }
    for(let i = lastPitch + 1; i < pitchedInput.length; i++){
        pitchedInput[i] = lastPitch >= 0 ? pitchedInput[i - 1] : 0;
    }
    return pitchedInput;
}
function upsample_f0(buffer, newSampleRateLength, modelMaxFrameLength) {
    buffer.splice(modelMaxFrameLength);
    return upsample_linear(buffer, newSampleRateLength);
}
function getPitchHz(modelPitch) {
    const fmin = 10.0;
    const binsPerOctave = 12.0;
    const cqtBin = modelPitch * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PT_SLOPE"] + __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PT_OFFSET"];
    return fmin * Math.pow(2.0, 1.0 * cqtBin / binsPerOctave);
}
async function getPitches(spiceModel, inputData, confidenceThreshold = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CONF_THRESHOLD"]) {
    const SPICE_SAMPLE_RATE = 16000;
    const SPICE_MODEL_MULTIPLE = 512;
    const spicePitchesOutput = [];
    const allConfidences = [];
    const audioChannelDataLength = inputData.length;
    const inputTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor"])(inputData);
    const inputSampleNum = Math.ceil(audioChannelDataLength / SPICE_MODEL_MULTIPLE) * SPICE_MODEL_MULTIPLE;
    const fullInputWithPadding = inputTensor.pad([
        [
            0,
            inputSampleNum - audioChannelDataLength
        ]
    ]);
    const expectedDuration = fullInputWithPadding.size / SPICE_SAMPLE_RATE;
    const output = await spiceModel.execute({
        input_audio_samples: fullInputWithPadding
    });
    let uncertainties = await output[0].data();
    const pitches = await output[1].data();
    if ((pitches.length - 1) * 32 / 1000 === expectedDuration) {
        let lastPitch = 20.0;
        for(let i = 0; i < pitches.length; ++i){
            const confidence = 1.0 - uncertainties[i];
            allConfidences.push(confidence);
            if (confidence >= __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CONF_THRESHOLD"]) {
                lastPitch = getPitchHz(pitches[i]);
                spicePitchesOutput.push(lastPitch);
            } else {
                const noiseT = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$truncated_normal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["truncatedNormal"])([
                    1
                ], 0.0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PITCH_CONF_JITTER"]);
                const noise = await noiseT.array();
                const jitter = 1.0 - noise;
                spicePitchesOutput.push(lastPitch * jitter);
                noiseT.dispose();
            }
        }
    } else {
        const finalPitchesLength = inputSampleNum / SPICE_MODEL_MULTIPLE + 1;
        const stitchedPitches = new Float32Array(finalPitchesLength);
        uncertainties = new Float32Array(finalPitchesLength);
        for(let i = 0; i < inputSampleNum; i += inputSampleNum / 4){
            const partialInput = fullInputWithPadding.slice([
                i
            ], [
                inputSampleNum / 4
            ]);
            const partialOutput = await spiceModel.execute({
                input_audio_samples: partialInput
            });
            const partialUncertainties = await partialOutput[0].data();
            const partialPitches = await partialOutput[1].data();
            const index = Math.floor(i / SPICE_MODEL_MULTIPLE);
            uncertainties.set(partialUncertainties, index);
            stitchedPitches.set(partialPitches, index);
            partialInput.dispose();
            partialOutput[0].dispose();
            partialOutput[1].dispose();
        }
        let lastPitch = 20.0;
        for(let i = 0; i < stitchedPitches.length; ++i){
            const confidence = 1.0 - uncertainties[i];
            allConfidences.push(confidence);
            if (confidence >= confidenceThreshold) {
                lastPitch = getPitchHz(stitchedPitches[i]);
                spicePitchesOutput.push(lastPitch);
            } else {
                const noiseT = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$truncated_normal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["truncatedNormal"])([
                    1
                ], 0.0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PITCH_CONF_JITTER"]);
                const noise = await noiseT.array();
                const jitter = 1.0 - noise;
                spicePitchesOutput.push(lastPitch * jitter);
                noiseT.dispose();
            }
        }
    }
    output[0].dispose();
    output[1].dispose();
    inputTensor.dispose();
    fullInputWithPadding.dispose();
    return {
        pitches: spicePitchesOutput,
        confidences: allConfidences
    };
}
;
 //# sourceMappingURL=pitch_utils.js.map
}}),
"[project]/node_modules/@magenta/music/esm/spice/spice.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "CONF_THRESHOLD": (()=>CONF_THRESHOLD),
    "MODEL_FRAME_RATE": (()=>MODEL_FRAME_RATE),
    "MODEL_SAMPLE_RATE": (()=>MODEL_SAMPLE_RATE),
    "PITCH_CONF_JITTER": (()=>PITCH_CONF_JITTER),
    "PT_OFFSET": (()=>PT_OFFSET),
    "PT_SLOPE": (()=>PT_SLOPE),
    "getAudioFeatures": (()=>getAudioFeatures),
    "startSpice": (()=>startSpice)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$converter$2f$dist$2f$executor$2f$graph_model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-converter/dist/executor/graph_model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/globals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/audio_utils.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$loudness_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/loudness_utils.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$pitch_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/pitch_utils.js [app-client] (ecmascript)");
;
;
;
;
const MODEL_SAMPLE_RATE = 16000;
const MODEL_FRAME_RATE = 250;
const PT_OFFSET = 25.58;
const PT_SLOPE = 63.07;
const PITCH_CONF_JITTER = 0.002;
const CONF_THRESHOLD = 0.7;
async function startSpice(modelUrl) {
    let spiceModel;
    spiceModel = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$converter$2f$dist$2f$executor$2f$graph_model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["loadGraphModel"])(modelUrl, {
        fromTFHub: true
    });
    return spiceModel;
}
async function getAudioFeatures(inputAudioBuffer, spiceModel, confidenceThreshold) {
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["getBackend"])() !== 'webgl') {
        throw new Error('Device does not support webgl.');
    }
    const audioData = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["resampleAndMakeMono"])(inputAudioBuffer, MODEL_SAMPLE_RATE);
    const originalRecordedBufferLength = audioData.length;
    const powerTmp = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$loudness_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["computePower"])(audioData);
    const { pitches, confidences } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$pitch_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["getPitches"])(spiceModel, audioData, confidenceThreshold);
    return {
        f0_hz: pitches,
        loudness_db: powerTmp,
        confidences,
        originalRecordedBufferLength
    };
}
;
 //# sourceMappingURL=spice.js.map
}}),
"[project]/node_modules/@magenta/music/esm/spice/model.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "SPICE": (()=>SPICE)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/spice.js [app-client] (ecmascript)");
;
const TFHUB_SPICE_MODEL_URL = 'https://tfhub.dev/google/tfjs-model/spice/2/default/1';
class SPICE {
    constructor(modelUrl){
        if (modelUrl) {
            this.modelUrl = modelUrl;
        } else {
            this.modelUrl = TFHUB_SPICE_MODEL_URL;
        }
    }
    async initialize() {
        this.spiceModel = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["startSpice"])(this.modelUrl);
        this.initialized = true;
    }
    async getAudioFeatures(inputAudioBuffer, confidenceThreshold) {
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["getAudioFeatures"])(inputAudioBuffer, this.spiceModel, confidenceThreshold);
    }
    dispose() {
        if (!this.initialized) {
            return;
        }
        this.spiceModel.dispose();
        this.initialized = false;
    }
    isInitialized() {
        return this.initialized;
    }
}
;
 //# sourceMappingURL=model.js.map
}}),
"[project]/node_modules/@magenta/music/esm/spice/index.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/model.js [app-client] (ecmascript)"); //# sourceMappingURL=index.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/spice/index.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/spice/index.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "SPICE": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SPICE"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/spice/index.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "SPICE": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["SPICE"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/index.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/ddsp/buffer_utils.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "arrayBufferToAudioBuffer": (()=>arrayBufferToAudioBuffer),
    "sliceAudioBuffer": (()=>sliceAudioBuffer)
});
const arrayBufferToAudioBuffer = (audioCtx, arrayBuffer, sampleRate)=>{
    const newBuffer = audioCtx.createBuffer(1, arrayBuffer.length, sampleRate);
    newBuffer.copyToChannel(arrayBuffer, 0);
    return newBuffer;
};
const sliceAudioBuffer = (audioCtx, audioBuffer, start = 0, end = audioBuffer.length, sampleRate)=>{
    const newBuffer = audioCtx.createBuffer(audioBuffer.numberOfChannels, end - start, sampleRate);
    for(let i = 0; i < audioBuffer.numberOfChannels; i++){
        newBuffer.copyToChannel(audioBuffer.getChannelData(i).slice(start, end), i);
    }
    return newBuffer;
}; //# sourceMappingURL=buffer_utils.js.map
}}),
"[project]/node_modules/@magenta/music/esm/ddsp/add_reverb.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "addReverb": (()=>addReverb)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/tone/build/esm/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$core$2f$Global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/tone/build/esm/core/Global.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$core$2f$context$2f$Offline$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/tone/build/esm/core/context/Offline.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$component$2f$dynamics$2f$Compressor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/tone/build/esm/component/dynamics/Compressor.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$effect$2f$Reverb$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/tone/build/esm/effect/Reverb.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$component$2f$filter$2f$Filter$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/tone/build/esm/component/filter/Filter.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$source$2f$buffer$2f$Player$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/tone/build/esm/source/buffer/Player.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$buffer_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/buffer_utils.js [app-client] (ecmascript)");
;
;
async function addReverb({ audioCtx, arrayBuffer, sampleRate }) {
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$core$2f$Global$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["setContext"])(audioCtx);
    let bufferWithReverb;
    let resampledAudioBuffer = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$buffer_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["arrayBufferToAudioBuffer"])(audioCtx, arrayBuffer, sampleRate);
    const renderingPromise = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$core$2f$context$2f$Offline$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Offline"])(()=>{
        const limiter = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$component$2f$dynamics$2f$Compressor$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Compressor"]({
            attack: 0.001,
            release: 0.001,
            threshold: -6
        }).toDestination();
        const reverb = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$effect$2f$Reverb$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Reverb"]({
            wet: 0.3,
            decay: 3
        }).connect(limiter);
        const filter = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$component$2f$filter$2f$Filter$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Filter"](8000, 'lowpass', -24).connect(reverb);
        const player = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$source$2f$buffer$2f$Player$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Player"]({
            url: resampledAudioBuffer
        }).connect(filter);
        player.start();
        return reverb.ready;
    }, arrayBuffer.length / sampleRate);
    bufferWithReverb = await renderingPromise;
    const bufferWithReverbData = bufferWithReverb.getChannelData(0);
    resampledAudioBuffer = null;
    bufferWithReverb.dispose();
    bufferWithReverb = null;
    return bufferWithReverbData;
} //# sourceMappingURL=add_reverb.js.map
}}),
"[project]/node_modules/@magenta/music/esm/ddsp/audio_utils.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "mixAndJoinAudioData": (()=>mixAndJoinAudioData)
});
function mixAndJoinAudioData(buffers, mixLength) {
    const finalFrameLength = buffers.reduce((acc, buffer)=>acc + buffer.length, 0);
    const mixedAndJoinedBuffer = new Float32Array(finalFrameLength);
    const getCrossFadedValue = (a, b, _ratio)=>{
        return a * (1 - _ratio) + b * _ratio;
    };
    let bufferLengthCount = 0;
    for(let bufferCount = 0; bufferCount < buffers.length; bufferCount++){
        const currentBuffer = buffers[bufferCount];
        const hasNextBuffer = bufferCount < buffers.length - 1;
        if (bufferCount === 0) {
            mixedAndJoinedBuffer.set(currentBuffer, bufferLengthCount);
            bufferLengthCount += currentBuffer.length;
        }
        if (hasNextBuffer) {
            const nextBuffer = buffers[bufferCount + 1];
            const offset = bufferLengthCount - mixLength;
            for(let i = offset, j = 0, currentBufferCounter = currentBuffer.length - mixLength; i < bufferLengthCount && j < nextBuffer.length; i++, j++, currentBufferCounter++){
                const ratioPercentage = (i - offset) / (bufferLengthCount - offset);
                mixedAndJoinedBuffer[i] = getCrossFadedValue(currentBuffer[currentBufferCounter], nextBuffer[j], ratioPercentage);
            }
            mixedAndJoinedBuffer.set(nextBuffer.slice(mixLength), bufferLengthCount);
            bufferLengthCount += nextBuffer.slice(mixLength).length;
        }
    }
    return mixedAndJoinedBuffer;
}
;
 //# sourceMappingURL=audio_utils.js.map
}}),
"[project]/node_modules/@magenta/music/esm/ddsp/constants.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "CONF_SMOOTH_SIZE": (()=>CONF_SMOOTH_SIZE),
    "CONF_THRESHOLD": (()=>CONF_THRESHOLD),
    "CROSSFADE_DURATION": (()=>CROSSFADE_DURATION),
    "LD_CONF_REDUCTION": (()=>LD_CONF_REDUCTION),
    "LOWEST_LD": (()=>LOWEST_LD),
    "MIN_VRAM": (()=>MIN_VRAM),
    "OUTPUT_SAMPLE_RATE": (()=>OUTPUT_SAMPLE_RATE),
    "PITCHES_HOP": (()=>PITCHES_HOP)
});
const MIN_VRAM = 50;
const LOWEST_LD = -120;
const CROSSFADE_DURATION = 1;
const OUTPUT_SAMPLE_RATE = 48000;
const LD_CONF_REDUCTION = -25.0;
const CONF_SMOOTH_SIZE = 100;
const PITCHES_HOP = 8192;
const CONF_THRESHOLD = 0.7; //# sourceMappingURL=constants.js.map
}}),
"[project]/node_modules/@magenta/music/esm/ddsp/ddsp.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "convertFrameToSecs": (()=>convertFrameToSecs),
    "convertSecsToFrame": (()=>convertSecsToFrame),
    "getModel": (()=>getModel),
    "memCheck": (()=>memCheck),
    "normalizeAudioFeatures": (()=>normalizeAudioFeatures),
    "resizeAudioFeatures": (()=>resizeAudioFeatures)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/globals.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$converter$2f$dist$2f$executor$2f$graph_model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-converter/dist/executor/graph_model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/tensor1d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sub$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/sub.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/add.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$boolean_mask$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/boolean_mask.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$reshape$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/reshape.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$pool$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/pool.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$less_equal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/less_equal.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$maximum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/maximum.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$logical_or$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/logical_or.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/audio_utils.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$pitch_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/pitch_utils.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/spice.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/constants.js [app-client] (ecmascript)");
;
;
;
;
;
async function memCheck() {
    const bytesPerMB = 1024 * 1024;
    const screenResToVRAMFactor = 600;
    const screenSize = window.screen.availWidth * window.screen.availHeight;
    const DPI = window.devicePixelRatio;
    const vramSize = Math.round(screenSize * DPI * screenResToVRAMFactor / bytesPerMB);
    if (!isNaN(vramSize) && vramSize < __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIN_VRAM"]) {
        throw new Error(`Insufficient memory! Your device has ${vramSize} and recommended memory is ${__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIN_VRAM"]}`);
    }
    try {
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ready"])();
        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["getBackend"])() !== 'webgl') {
            throw new Error('It looks like your browser does not support webgl.');
        }
    } catch (err) {
        throw new Error(`insufficient memory - ${err}`);
    }
    return true;
}
async function getModel(url) {
    const model = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$converter$2f$dist$2f$executor$2f$graph_model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["loadGraphModel"])(url);
    return model;
}
function resizeAudioFeatures(audioFeatures, startingFrame, endingFrame, isLastChunks, resizedLength) {
    return new Promise((resolve)=>{
        const resizedAudioFeatures = {
            loudness_db: [
                0
            ],
            f0_hz: [
                0
            ]
        };
        let counter = 0;
        for(let i = startingFrame; i < endingFrame; i++){
            if (isLastChunks && i >= resizedLength) {
                resizedAudioFeatures.loudness_db[counter] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LOWEST_LD"];
                resizedAudioFeatures.f0_hz[counter] = -1;
            } else {
                resizedAudioFeatures.loudness_db[counter] = audioFeatures.loudness_db[i];
                resizedAudioFeatures.f0_hz[counter] = audioFeatures.f0_hz[i];
            }
            counter += 1;
        }
        resolve(resizedAudioFeatures);
    });
}
async function normalizeAudioFeatures(af, model) {
    const SELECTED_LD_AVG_MAX = model.averageMaxLoudness;
    const SELECTED_LD_MEAN = model.meanLoudness;
    const SELECTED_LD_THRESH = model.loudnessThreshold;
    const SELECTED_P_MEAN = model.meanPitch;
    let loudness_db = [];
    let maskedPower;
    if (af.loudness_db.length > 0) {
        const ldShifted = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const inputLoudnessTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor1d"])(af.loudness_db, 'float32');
            const ldMax = inputLoudnessTensor.max();
            const ldDiffMax = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sub$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sub"])(SELECTED_LD_AVG_MAX, ldMax);
            const final = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$add$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["add"])(inputLoudnessTensor, ldDiffMax);
            inputLoudnessTensor.dispose();
            ldMax.dispose();
            ldDiffMax.dispose();
            return final;
        });
        const ldShiftedGreater = ldShifted.greater(SELECTED_LD_THRESH);
        const ldGreater = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$boolean_mask$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["booleanMaskAsync"])(ldShifted, ldShiftedGreater);
        const ldGreaterVal = await ldGreater.array();
        const ldFinal = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const ldMean = ldGreaterVal > 0 ? ldGreater.mean() : ldShifted.mean();
            const ldDiffMean = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sub$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sub"])(SELECTED_LD_MEAN, ldMean);
            const ldDiffMeanAdded = ldShifted.add(ldDiffMean);
            const loudnessAdjustment = 0;
            const ldAdjusted = ldDiffMeanAdded.add(loudnessAdjustment);
            const ldClipped = ldAdjusted.clipByValue(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LOWEST_LD"], SELECTED_LD_AVG_MAX);
            const oldMin = ldClipped.min();
            const subOldMin = ldMean.sub(oldMin);
            return ldClipped.sub(oldMin).div(subOldMin).mul(SELECTED_LD_MEAN - __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LOWEST_LD"]).add(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LOWEST_LD"]);
        });
        const reshapedConf = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$reshape$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["reshape"])(af.confidences, [
            -1,
            1,
            1
        ]);
        const smoothConf = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$pool$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["pool"])(reshapedConf, [
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CONF_SMOOTH_SIZE"],
            1
        ], 'avg', 'same');
        const smoothConfReshaped = smoothConf.reshape([
            -1
        ]);
        const confMask = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$less_equal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["lessEqual"])(smoothConfReshaped, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CONF_THRESHOLD"]);
        maskedPower = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            const confReduction = confMask.mul(__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LD_CONF_REDUCTION"]);
            const loudnessReduced = ldFinal.add(confReduction);
            const finalMaskedPower = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$maximum$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["maximum"])(loudnessReduced, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["LOWEST_LD"]);
            confReduction.dispose();
            loudnessReduced.dispose();
            return finalMaskedPower;
        });
        loudness_db = await maskedPower.array();
        ldShiftedGreater.dispose();
        ldShifted.dispose();
        ldFinal.dispose();
        ldGreater.dispose();
        smoothConf.dispose();
        smoothConfReshaped.dispose();
        reshapedConf.dispose();
        confMask.dispose();
    }
    let f0_hz = [];
    if (af.f0_hz.length > 0) {
        const _p = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["hzToMidi"])(af.f0_hz);
        const p = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            for(let i = 0, n = _p.length; i < n; ++i){
                if (_p[i] === -Infinity) {
                    _p[i] = 0;
                }
            }
            return _p;
        });
        const confMask = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$less_equal$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["lessEqual"])(af.confidences, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CONF_THRESHOLD"]);
        const maskedPowerThreshold = maskedPower.greater(SELECTED_LD_THRESH);
        const mask = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$logical_or$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logicalOr"])(confMask, maskedPowerThreshold);
        const pMask = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$boolean_mask$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["booleanMaskAsync"])(p, mask);
        const pMean = pMask.mean();
        const pDiff = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$sub$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sub"])(SELECTED_P_MEAN, pMean);
        const pDiffVal = await pDiff.array();
        const finalf0 = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$globals$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tidy"])(()=>{
            let pDiffOctave = pDiffVal / 12;
            pDiffOctave = Math.round(pDiffOctave);
            const shiftedF0WithOctave = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$pitch_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["shiftF0"])(af.f0_hz, pDiffOctave);
            return shiftedF0WithOctave;
        });
        f0_hz = await finalf0.array();
        maskedPower.dispose();
        pMean.dispose();
        pMask.dispose();
        pDiff.dispose();
        finalf0.dispose();
        maskedPowerThreshold.dispose();
        mask.dispose();
        confMask.dispose();
    }
    return {
        f0_hz,
        loudness_db
    };
}
function convertSecsToFrame(secs) {
    return secs * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MODEL_FRAME_RATE"];
}
function convertFrameToSecs(frameLength) {
    return frameLength / __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MODEL_FRAME_RATE"];
}
;
 //# sourceMappingURL=ddsp.js.map
}}),
"[project]/node_modules/@magenta/music/esm/ddsp/model.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "DDSP": (()=>DDSP)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$backend$2d$webgl$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-backend-webgl/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$converter$2f$dist$2f$operations$2f$custom_op$2f$register$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-converter/dist/operations/custom_op/register.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/split.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/concat.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$environment$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/environment.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs-core/dist/ops/tensor1d.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/tone/build/esm/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$core$2f$context$2f$Context$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/tone/build/esm/core/context/Context.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/audio_utils.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$pitch_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/pitch_utils.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/spice.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$add_reverb$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/add_reverb.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/audio_utils.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$buffer_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/buffer_utils.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/constants.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/ddsp.js [app-client] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
;
class DDSP {
    constructor(checkpointUrl, settings){
        this.checkpointUrl = checkpointUrl;
        if (settings) {
            this.settings = settings;
        }
    }
    async initialize() {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$converter$2f$dist$2f$operations$2f$custom_op$2f$register$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["registerOp"])('Roll', (node)=>{
            const tensors = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$split$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["split"])(node.inputs[0], 2, 2);
            const result = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$concat$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["concat"])([
                tensors[1],
                tensors[0]
            ], 2);
            tensors.forEach((tensor)=>tensor.dispose());
            return result;
        });
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$environment$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["env"])().set('WEBGL_PACK', false);
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$environment$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["env"])().set('WEBGL_CONV_IM2COL', false);
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$environment$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["env"])().set('WEBGL_DELETE_TEXTURE_THRESHOLD', 100 * 1024 * 1024);
        this.model = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["getModel"])(`${this.checkpointUrl}/model.json`);
        let settings;
        try {
            settings = await fetch(`${this.checkpointUrl}/settings.json`).then((res)=>res.json());
        } finally{
            if (this.settings === null) {
                throw new Error('Passing settings is required if you do not have a settings.json file.');
            }
        }
        this.settings = {
            ...settings,
            ...this.settings
        };
        this.initialized = true;
    }
    dispose() {
        if (!this.initialized) {
            return;
        }
        this.model.dispose();
        this.checkpointUrl = null;
        this.initialized = false;
    }
    isInitialized() {
        return this.initialized;
    }
    async memCheck() {
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["memCheck"])();
    }
    async synthesize(audioFeatures, settings) {
        if (settings !== null) {
            this.settings = {
                ...this.settings,
                ...settings
            };
        }
        const { f0_hz, loudness_db, confidences } = audioFeatures;
        const upsampledPitches = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$pitch_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["upsample_f0"])(f0_hz, loudness_db.length, this.settings.modelMaxFrameLength);
        const upsampledConfidences = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$pitch_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["upsample_f0"])(confidences, loudness_db.length, this.settings.modelMaxFrameLength);
        const normalizedAudioFeatures = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["normalizeAudioFeatures"])({
            f0_hz: upsampledPitches,
            loudness_db,
            confidences: upsampledConfidences
        }, this.settings);
        const audioChunks = [];
        const inputFrameLength = normalizedAudioFeatures.loudness_db.length;
        const inputAudioLengthInSecs = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["convertFrameToSecs"])(inputFrameLength);
        let isLastChunks = false;
        const usableAudioDuration = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["convertFrameToSecs"])(this.settings.modelMaxFrameLength);
        let audioBuffer;
        const mixBufferLength = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CROSSFADE_DURATION"] * __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MODEL_SAMPLE_RATE"];
        for(let i = 0; i < inputAudioLengthInSecs; i += usableAudioDuration - __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["CROSSFADE_DURATION"]){
            const startFrameIndex = Math.floor((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["convertSecsToFrame"])(i));
            const endFrameIndex = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["convertSecsToFrame"])(i + usableAudioDuration);
            if (endFrameIndex > inputFrameLength) {
                isLastChunks = true;
            }
            const { f0_hz, loudness_db } = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["resizeAudioFeatures"])(normalizedAudioFeatures, startFrameIndex, endFrameIndex, isLastChunks, inputFrameLength);
            const f0hzTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor1d"])(f0_hz, 'float32');
            const loudnessTensor = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2d$core$2f$dist$2f$ops$2f$tensor1d$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["tensor1d"])(loudness_db, 'float32');
            const result = await this.model.predict({
                f0_hz: f0hzTensor,
                loudness_db: loudnessTensor
            });
            const resultData = await result.data();
            audioChunks.push(resultData);
            result.dispose();
            f0hzTensor.dispose();
            loudnessTensor.dispose();
        }
        if (inputAudioLengthInSecs <= usableAudioDuration) {
            audioBuffer = audioChunks[0];
        } else {
            const buffers = [];
            for(let i = 0; i < audioChunks.length; i++){
                const ac = audioChunks[i];
                buffers.push(ac);
            }
            audioBuffer = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["mixAndJoinAudioData"])(buffers, mixBufferLength);
        }
        const trimmedAudioChannelData = audioBuffer.slice(0, audioFeatures.originalRecordedBufferLength);
        const trimmedACModified = trimmedAudioChannelData.map((val)=>val * (this.settings.postGain || 1));
        const audioCtx = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$tone$2f$build$2f$esm$2f$core$2f$context$2f$Context$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Context"]();
        const trimmedAudioBuffer = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$buffer_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["arrayBufferToAudioBuffer"])(audioCtx, trimmedACModified, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$spice$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MODEL_SAMPLE_RATE"]);
        const resampledAudio = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$audio_utils$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["resampleAndMakeMono"])(trimmedAudioBuffer, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["OUTPUT_SAMPLE_RATE"]);
        const bufferWithReverbData = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$add_reverb$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["addReverb"])({
            audioCtx,
            arrayBuffer: resampledAudio,
            sampleRate: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$constants$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["OUTPUT_SAMPLE_RATE"]
        });
        return bufferWithReverbData;
    }
}
;
 //# sourceMappingURL=model.js.map
}}),
"[project]/node_modules/@magenta/music/esm/ddsp/index.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/model.js [app-client] (ecmascript)"); //# sourceMappingURL=index.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/ddsp/index.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/ddsp/index.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "DDSP": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DDSP"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$model$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/model.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/ddsp/index.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "DDSP": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["DDSP"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/index.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/ddsp.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/index.js [app-client] (ecmascript) <module evaluation>"); //# sourceMappingURL=ddsp.js.map
;
}}),
"[project]/node_modules/@magenta/music/esm/ddsp.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/index.js [app-client] (ecmascript) <locals>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/protobuf.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/gansynth.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp.js [app-client] (ecmascript) <module evaluation>"); //# sourceMappingURL=index.js.map
;
;
;
;
;
;
;
;
;
;
;
;
}}),
"[project]/node_modules/@magenta/music/esm/index.js [app-client] (ecmascript) <module evaluation>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/protobuf.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/gansynth.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/core.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "BasePlayer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["BasePlayer"]),
    "BasePlayerCallback": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["BasePlayerCallback"]),
    "BaseRecorderCallback": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["BaseRecorderCallback"]),
    "BaseSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["BaseSVGVisualizer"]),
    "BaseVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["BaseVisualizer"]),
    "MIDIPlayer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIDIPlayer"]),
    "Metronome": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Metronome"]),
    "MetronomeCallbackObject": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MetronomeCallbackObject"]),
    "MidiConversionError": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MidiConversionError"]),
    "PianoRollCanvasVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoRollCanvasVisualizer"]),
    "PianoRollSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoRollSVGVisualizer"]),
    "Player": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Player"]),
    "PlayerWithClick": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PlayerWithClick"]),
    "Recorder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Recorder"]),
    "ScrollType": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ScrollType"]),
    "SoundFontPlayer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SoundFontPlayer"]),
    "StaffSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["StaffSVGVisualizer"]),
    "Visualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Visualizer"]),
    "WaterfallSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["WaterfallSVGVisualizer"]),
    "aux_inputs": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["aux_inputs"]),
    "blobToNoteSequence": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["blobToNoteSequence"]),
    "chords": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["chords"]),
    "constants": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["constants"]),
    "data": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["data"]),
    "logging": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logging"]),
    "melodies": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["melodies"]),
    "midiToSequenceProto": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["midiToSequenceProto"]),
    "performance": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["performance"]),
    "sequenceProtoToMidi": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sequenceProtoToMidi"]),
    "sequences": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sequences"]),
    "urlToBlob": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["urlToBlob"]),
    "urlToNoteSequence": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["urlToNoteSequence"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/core.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "BasePlayer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["BasePlayer"]),
    "BasePlayerCallback": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["BasePlayerCallback"]),
    "BaseRecorderCallback": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["BaseRecorderCallback"]),
    "BaseSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["BaseSVGVisualizer"]),
    "BaseVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["BaseVisualizer"]),
    "MIDIPlayer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MIDIPlayer"]),
    "Metronome": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Metronome"]),
    "MetronomeCallbackObject": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MetronomeCallbackObject"]),
    "MidiConversionError": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MidiConversionError"]),
    "PianoRollCanvasVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoRollCanvasVisualizer"]),
    "PianoRollSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoRollSVGVisualizer"]),
    "Player": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Player"]),
    "PlayerWithClick": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PlayerWithClick"]),
    "Recorder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Recorder"]),
    "ScrollType": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["ScrollType"]),
    "SoundFontPlayer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["SoundFontPlayer"]),
    "StaffSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["StaffSVGVisualizer"]),
    "Visualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Visualizer"]),
    "WaterfallSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["WaterfallSVGVisualizer"]),
    "aux_inputs": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["aux_inputs"]),
    "blobToNoteSequence": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["blobToNoteSequence"]),
    "chords": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["chords"]),
    "constants": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["constants"]),
    "data": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["data"]),
    "logging": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["logging"]),
    "melodies": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["melodies"]),
    "midiToSequenceProto": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["midiToSequenceProto"]),
    "performance": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["performance"]),
    "sequenceProtoToMidi": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["sequenceProtoToMidi"]),
    "sequences": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["sequences"]),
    "urlToBlob": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["urlToBlob"]),
    "urlToNoteSequence": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["urlToNoteSequence"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/coconet.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "Coconet": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Coconet"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/coconet.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "Coconet": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Coconet"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/music_rnn.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "MusicRNN": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MusicRNN"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/music_rnn.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "MusicRNN": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MusicRNN"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/music_vae.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "Decoder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Decoder"]),
    "Encoder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Encoder"]),
    "MidiMe": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MidiMe"]),
    "MusicVAE": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MusicVAE"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/music_vae.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "Decoder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Decoder"]),
    "Encoder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Encoder"]),
    "MidiMe": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MidiMe"]),
    "MusicVAE": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MusicVAE"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/piano_genie.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "PianoGenie": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenie"]),
    "PianoGenieChord": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenieChord"]),
    "PianoGenieKeysig": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenieKeysig"]),
    "PianoGenieKeysigChord": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenieKeysigChord"]),
    "PianoGenieKeysigChordFamily": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenieKeysigChordFamily"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/piano_genie.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "PianoGenie": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenie"]),
    "PianoGenieChord": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenieChord"]),
    "PianoGenieKeysig": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenieKeysig"]),
    "PianoGenieKeysigChord": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenieKeysigChord"]),
    "PianoGenieKeysigChordFamily": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenieKeysigChordFamily"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/protobuf.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "NoteSequence": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NoteSequence"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/protobuf/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/protobuf.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/protobuf.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "NoteSequence": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["NoteSequence"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/protobuf.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/protobuf.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/transcription.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "OnsetsAndFrames": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["OnsetsAndFrames"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/transcription.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "OnsetsAndFrames": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["OnsetsAndFrames"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/gansynth.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "GANSynth": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["GANSynth"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/gansynth/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/gansynth.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/gansynth.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "GANSynth": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["GANSynth"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/gansynth.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/gansynth.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/ddsp.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "DDSP": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DDSP"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/ddsp.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "DDSP": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["DDSP"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp.js [app-client] (ecmascript) <exports>");
}}),
"[project]/node_modules/@magenta/music/esm/index.js [app-client] (ecmascript) <exports>": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "BasePlayer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["BasePlayer"]),
    "BasePlayerCallback": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["BasePlayerCallback"]),
    "BaseRecorderCallback": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["BaseRecorderCallback"]),
    "BaseSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["BaseSVGVisualizer"]),
    "BaseVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["BaseVisualizer"]),
    "Coconet": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Coconet"]),
    "DDSP": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["DDSP"]),
    "Decoder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Decoder"]),
    "Encoder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Encoder"]),
    "GANSynth": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["GANSynth"]),
    "MIDIPlayer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MIDIPlayer"]),
    "Metronome": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Metronome"]),
    "MetronomeCallbackObject": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MetronomeCallbackObject"]),
    "MidiConversionError": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MidiConversionError"]),
    "MidiMe": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MidiMe"]),
    "MusicRNN": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MusicRNN"]),
    "MusicVAE": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["MusicVAE"]),
    "NoteSequence": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["NoteSequence"]),
    "OnsetsAndFrames": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["OnsetsAndFrames"]),
    "PianoGenie": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenie"]),
    "PianoGenieChord": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenieChord"]),
    "PianoGenieKeysig": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenieKeysig"]),
    "PianoGenieKeysigChord": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenieKeysigChord"]),
    "PianoGenieKeysigChordFamily": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoGenieKeysigChordFamily"]),
    "PianoRollCanvasVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoRollCanvasVisualizer"]),
    "PianoRollSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PianoRollSVGVisualizer"]),
    "Player": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Player"]),
    "PlayerWithClick": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["PlayerWithClick"]),
    "Recorder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Recorder"]),
    "SPICE": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SPICE"]),
    "ScrollType": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["ScrollType"]),
    "SoundFontPlayer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["SoundFontPlayer"]),
    "StaffSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["StaffSVGVisualizer"]),
    "Visualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["Visualizer"]),
    "WaterfallSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["WaterfallSVGVisualizer"]),
    "aux_inputs": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["aux_inputs"]),
    "blobToNoteSequence": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["blobToNoteSequence"]),
    "chords": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["chords"]),
    "constants": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["constants"]),
    "data": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["data"]),
    "logging": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["logging"]),
    "melodies": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["melodies"]),
    "midiToSequenceProto": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["midiToSequenceProto"]),
    "performance": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["performance"]),
    "sequenceProtoToMidi": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sequenceProtoToMidi"]),
    "sequences": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["sequences"]),
    "tf": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__),
    "urlToBlob": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["urlToBlob"]),
    "urlToNoteSequence": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["urlToNoteSequence"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$tensorflow$2f$tfjs$2f$dist$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@tensorflow/tfjs/dist/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$core$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/core.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$coconet$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/coconet.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_rnn$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_rnn.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$music_vae$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/music_vae.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$piano_genie$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/piano_genie.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$protobuf$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/protobuf.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$transcription$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/transcription.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$gansynth$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/gansynth.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$spice$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/spice/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$ddsp$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/ddsp.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/index.js [app-client] (ecmascript) <locals>");
}}),
"[project]/node_modules/@magenta/music/esm/index.js [app-client] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "BasePlayer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["BasePlayer"]),
    "BasePlayerCallback": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["BasePlayerCallback"]),
    "BaseRecorderCallback": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["BaseRecorderCallback"]),
    "BaseSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["BaseSVGVisualizer"]),
    "BaseVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["BaseVisualizer"]),
    "Coconet": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Coconet"]),
    "DDSP": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["DDSP"]),
    "Decoder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Decoder"]),
    "Encoder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Encoder"]),
    "GANSynth": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["GANSynth"]),
    "MIDIPlayer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MIDIPlayer"]),
    "Metronome": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Metronome"]),
    "MetronomeCallbackObject": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MetronomeCallbackObject"]),
    "MidiConversionError": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MidiConversionError"]),
    "MidiMe": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MidiMe"]),
    "MusicRNN": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MusicRNN"]),
    "MusicVAE": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["MusicVAE"]),
    "NoteSequence": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["NoteSequence"]),
    "OnsetsAndFrames": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["OnsetsAndFrames"]),
    "PianoGenie": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenie"]),
    "PianoGenieChord": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenieChord"]),
    "PianoGenieKeysig": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenieKeysig"]),
    "PianoGenieKeysigChord": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenieKeysigChord"]),
    "PianoGenieKeysigChordFamily": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoGenieKeysigChordFamily"]),
    "PianoRollCanvasVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoRollCanvasVisualizer"]),
    "PianoRollSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PianoRollSVGVisualizer"]),
    "Player": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Player"]),
    "PlayerWithClick": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["PlayerWithClick"]),
    "Recorder": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Recorder"]),
    "SPICE": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["SPICE"]),
    "ScrollType": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["ScrollType"]),
    "SoundFontPlayer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["SoundFontPlayer"]),
    "StaffSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["StaffSVGVisualizer"]),
    "Visualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["Visualizer"]),
    "WaterfallSVGVisualizer": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["WaterfallSVGVisualizer"]),
    "aux_inputs": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["aux_inputs"]),
    "blobToNoteSequence": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["blobToNoteSequence"]),
    "chords": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["chords"]),
    "constants": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["constants"]),
    "data": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["data"]),
    "logging": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["logging"]),
    "melodies": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["melodies"]),
    "midiToSequenceProto": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["midiToSequenceProto"]),
    "performance": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["performance"]),
    "sequenceProtoToMidi": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["sequenceProtoToMidi"]),
    "sequences": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["sequences"]),
    "tf": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["tf"]),
    "urlToBlob": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["urlToBlob"]),
    "urlToNoteSequence": (()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__["urlToNoteSequence"])
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/index.js [app-client] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$magenta$2f$music$2f$esm$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$exports$3e$__ = __turbopack_context__.i("[project]/node_modules/@magenta/music/esm/index.js [app-client] (ecmascript) <exports>");
}}),
}]);

//# sourceMappingURL=node_modules_%40magenta_music_esm_63dad41f._.js.map